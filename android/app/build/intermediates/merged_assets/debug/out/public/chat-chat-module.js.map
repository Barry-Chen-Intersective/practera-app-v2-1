{"version":3,"sources":["./src/app/chat/chat-list/chat-list.component.html","./src/app/chat/chat-preview/chat-preview.component.html","./src/app/chat/chat-room/chat-room.component.html","./src/app/chat/chat-view/chat-view.component.html","./src/app/chat/chat-list/chat-list.component.scss","./src/app/chat/chat-list/chat-list.component.ts","./src/app/chat/chat-preview/chat-preview.component.scss","./src/app/chat/chat-preview/chat-preview.component.ts","./src/app/chat/chat-room/chat-room.component.scss","./src/app/chat/chat-room/chat-room.component.ts","./src/app/chat/chat-routing.module.ts","./src/app/chat/chat-view/chat-view.component.scss","./src/app/chat/chat-view/chat-view.component.ts","./src/app/chat/chat.component.ts","./src/app/chat/chat.module.ts","./src/app/chat/chat.service.ts","./src/app/shared/directives/autoresize/autoresize.directive.ts"],"names":[],"mappings":"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","file":"chat-chat-module.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar [ngClass]=\\\"{'ion-toolbar-absolute': !utils.isMobile()}\\\">\\n    <ion-title>Chat</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content color=\\\"light\\\" [ngClass]=\\\"{'ion-content-absolute': !utils.isMobile()}\\\">\\n  <ng-container *ngIf=\\\"loadingChatList\\\">\\n    <div class=\\\"ion-text-center\\\">\\n      <ion-spinner></ion-spinner>\\n    </div>\\n  </ng-container>\\n  <ion-list [ngClass]=\\\"{'desktop-view': !utils.isMobile()}\\\">\\n    <clickable-item\\n      *ngFor=\\\"let chat of chatList; let i = index\\\"\\n      (click)=\\\"navigateToChatRoom(chat)\\\"\\n      [active]=\\\"currentChat &&\\n      (currentChat.teamId == chat.team_id) &&\\n      (currentChat.teamMemberId == chat.team_member_id) &&\\n      (currentChat.participantsOnly == chat.participants_only) &&\\n      (currentChat.chatName == chat.name)\\\"\\n      [ngClass]=\\\"{'unread': chat.unread_messages > 0}\\\"\\n      [lines]=\\\"'none'\\\">\\n      <ion-avatar [ngClass]=\\\"{'color-team': chat.is_team}\\\" slot=\\\"start\\\" text-center>\\n        <ng-container *ngIf=\\\"chat.is_team; else avatarElseBlock\\\"><ion-icon name=\\\"people-outline\\\"></ion-icon></ng-container>\\n        <ng-template #avatarElseBlock><img [src]=\\\"chat.team_member_image\\\"></ng-template>\\n      </ion-avatar>\\n      <ion-label>\\n        <div class=\\\"chat-name-container caption\\\">\\n          <p class=\\\"chat-name subtitle-1\\\" [ngClass]=\\\"{'team-channel': chat.is_team, 'bold': chat.unread_messages > 0}\\\">{{chat.name}}</p>\\n          <ng-container *ngIf=\\\"(chat.role === 'mentor') && (haveMoreTeam)\\\">\\n            <span>mentor - {{chat.team_name}}</span>\\n          </ng-container>\\n          <ng-container *ngIf=\\\"(chat.role === 'mentor') && (!haveMoreTeam)\\\">\\n            <span>mentor</span>\\n          </ng-container>\\n          <ng-container *ngIf=\\\"(chat.role !== 'mentor') && (!chat.is_team) && (haveMoreTeam)\\\">\\n            <span>{{chat.team_name}}</span>\\n          </ng-container>\\n        </div>\\n        <ng-container *ngIf=\\\"chat.last_message; else messgeElseBlock\\\">\\n          <p class=\\\"body-2\\\">{{chat.last_message}}</p>\\n        </ng-container>\\n        <ng-template #messgeElseBlock><p class=\\\"body-2 gray-2\\\">No messages.</p></ng-template>\\n      </ion-label>\\n      <div slot=\\\"end\\\" class=\\\"time-container\\\">\\n        <div class=\\\"caption gray-2\\\">\\n          <span>{{getChatDate(chat.last_message_created)}}</span>\\n        </div>\\n        <ng-container *ngIf=\\\"chat.unread_messages > 0\\\">\\n          <ion-badge class=\\\"caption\\\">{{chat.unread_messages}}</ion-badge>\\n        </ng-container>\\n      </div>\\n    </clickable-item>\\n  </ion-list>\\n</ion-content>\\n\"","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-icon *ngIf=\\\"file.url\\\"\\n      name=\\\"download\\\"\\n      (click)=\\\"download()\\\"\\n      color=\\\"primary\\\"\\n      size=\\\"large\\\"\\n      slot=\\\"end\\\"\\n      margin-start\\n    ></ion-icon>\\n\\n    <ion-icon name=\\\"close-circle-outline\\\"\\n      (click)=\\\"close()\\\"\\n      color=\\\"primary\\\"\\n      size=\\\"large\\\"\\n      slot=\\\"end\\\"\\n      margin-start\\n    ></ion-icon>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content text-center>\\n  <div class=\\\"wrapper\\\">\\n    <ng-container *ngIf=\\\"file && file.mimetype.includes('image')\\\">\\n      <img [src]=\\\"file.url\\\">\\n    </ng-container>\\n\\n    <ng-container *ngIf=\\\"file && file.mimetype.includes('video')\\\">\\n        <video controls>\\n          <ng-container *ngIf=\\\"file.transcoded\\\">\\n            <source [src]=\\\"file.transcoded + '.mp4#t=0.5'\\\" type=\\\"video/mp4\\\">\\n            <source [src]=\\\"file.transcoded + '.webm'\\\" type=\\\"video/webm\\\">\\n            <source [src]=\\\"file.transcoded + '.ts'\\\">\\n          </ng-container>\\n          <source [src]=\\\"file.url\\\" [type]=\\\"file.mimetype\\\">\\n          {{ file.url }}\\n        </video>\\n    </ng-container>\\n  </div>\\n</ion-content>\\n\"","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar [ngClass]=\\\"{'ion-toolbar-absolute': !utils.isMobile()}\\\">\\n    <ion-icon *ngIf=\\\"utils.isMobile()\\\" name=\\\"arrow-back\\\" (click)=\\\"back()\\\" color=\\\"primary\\\" slot=\\\"start\\\" margin-start></ion-icon>\\n    <ion-title class=\\\"ion-text-center\\\" [ngClass]=\\\"{\\n      'subtitle-2': !utils.isMobile()\\n    }\\\">{{selectedChat.is_team ? selectedChat.team_name : selectedChat.name}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content [ngClass]=\\\"{'ion-content-absolute-with-footer': !utils.isMobile()}\\\" color=\\\"light\\\" [scrollEvents]=\\\"true\\\" (ionScroll)=\\\"loadMoreMessages($event)\\\">\\n  <ng-container *ngIf=\\\"loadingChatMessages\\\">\\n    <div class=\\\"ion-text-center\\\">\\n      <ion-spinner></ion-spinner>\\n    </div>\\n  </ng-container>\\n  <ion-list lines=\\\"none\\\" color=\\\"light\\\" class=\\\"chat-list\\\" [ngClass]=\\\"{'desktop-view': !utils.isMobile()}\\\">\\n    <ng-container *ngFor=\\\"let message of messageList\\\">\\n      <ion-item color=\\\"light\\\">\\n        <ng-container *ngIf=\\\"checkIsLastMessage(message)\\\">\\n          <ion-avatar [ngClass]=\\\"getAvatarClass(message)\\\" slot=\\\"start\\\">\\n            <img [src]=\\\"message.sender_image\\\">\\n          </ion-avatar>\\n        </ng-container>\\n\\n        <ng-container *ngIf=\\\"!message.file; else attachment\\\">\\n          <ion-label [ngClass]=\\\"getClassForMessageBubble(message)\\\">\\n            <div *ngIf=\\\"checkToShowMessageTime(message)\\\" class=\\\"time caption gray-2\\\">\\n              <p>{{getMessageDate(message.sent_time)}}</p>\\n            </div>\\n            <div class=\\\"message-body\\\">\\n              <p class=\\\"message-text subtitle-1\\\" [innerHTML]=\\\"message.message\\\"></p>\\n            </div>\\n            <ng-container *ngIf=\\\"!message.noAvatar && selectedChat.is_team\\\">\\n              <div class=\\\"seen-text caption gray-2\\\">\\n                <p>{{message.sender_name}}</p>\\n              </div>\\n            </ng-container>\\n          </ion-label>\\n        </ng-container>\\n\\n        <ng-template #attachment>\\n          <ion-label [ngClass]=\\\"getClassForMessageBubble(message)\\\" text-wrap>\\n            <div *ngIf=\\\"checkToShowMessageTime(message)\\\" class=\\\"time\\\">\\n              <p>{{getMessageDate(message.sent_time)}}</p>\\n            </div>\\n\\n            <ng-container *ngIf=\\\"message.file && message.file.mimetype.includes('video')\\\">\\n              <div  class=\\\"message-body video-attachment-container\\\">\\n                <div id=\\\"inner-box\\\" (click)=\\\"preview(message.file)\\\">\\n                  <p><ion-icon name=\\\"play-circle\\\"></ion-icon></p>\\n                </div>\\n                <div class=\\\"label\\\">\\n                  <p>\\n                    <ion-label color=\\\"primary\\\">\\n                      {{ message.file.filename }}\\n                    </ion-label>\\n                  </p>\\n                </div>\\n              </div>\\n            </ng-container>\\n\\n            <ng-container *ngIf=\\\"message.file && message.file.mimetype.includes('image')\\\">\\n              <div class=\\\"message-body image\\\" (click)=\\\"preview(message.file)\\\">\\n                <div [innerHTML]=\\\"message.preview\\\"></div>\\n              </div>\\n            </ng-container>\\n\\n            <ng-container *ngIf=\\\"message.file && (\\n              !message.file.mimetype.includes('image') && !message.file.mimetype.includes('video')\\n            )\\\">\\n              <ion-item class=\\\"message-body general-attachment\\\" (click)=\\\"previewFile(message.file)\\\">\\n                <ion-ripple-effect></ion-ripple-effect>\\n                <ion-icon name=\\\"document-outline\\\" slot=\\\"start\\\"></ion-icon>\\n                <ion-label color=\\\"primary\\\">\\n                  {{ message.file.filename }}\\n                </ion-label>\\n                <ion-note *ngIf=\\\"getTypeByMime(message.file.mimetype)\\\">\\n                  {{ getTypeByMime(message.file.mimetype) }}\\n                </ion-note>\\n              </ion-item>\\n            </ng-container>\\n\\n            <ng-container *ngIf=\\\"!message.noAvatar && selectedChat.is_team\\\">\\n              <div class=\\\"seen-text caption gray-2\\\">\\n                <p>{{message.sender_name}}</p>\\n              </div>\\n            </ng-container>\\n          </ion-label>\\n        </ng-template>\\n\\n      </ion-item>\\n    </ng-container>\\n    <ng-container *ngIf=\\\"isTyping\\\">\\n      <ion-item color=\\\"light\\\">\\n        <ion-label class=\\\"received-messages no-avatar\\\" color=\\\"medium\\\">\\n          <p class=\\\"message-typing\\\">\\n            <i>{{typingMessage}}</i>\\n            <ion-spinner name=\\\"dots\\\" class=\\\"vertical-middle\\\"></ion-spinner>\\n          </p>\\n        </ion-label>\\n      </ion-item>\\n    </ng-container>\\n    <ng-container *ngIf=\\\"loadingMesageSend\\\">\\n      <ion-item color=\\\"light\\\">\\n        <div class=\\\"message-sending-loading\\\">\\n            <ion-spinner name=\\\"bubbles\\\"></ion-spinner>\\n        </div>\\n      </ion-item>\\n    </ng-container>\\n  </ion-list>\\n  <ng-container *ngIf=\\\"!messageList.length && !loadingChatMessages\\\">\\n    <div class=\\\"ion-text-center not-started-empty-status\\\">\\n      <img class=\\\"image\\\" [ngClass]=\\\"{'desktop': !utils.isMobile()}\\\" src=\\\"/assets/icon-epmty-chat.svg\\\">\\n      <p class=\\\"head-text headline-5 gray-3\\\">Type your first message!</p>\\n      <p class=\\\"sub-text subtitle-1 gray-1\\\">It's time to start a chat</p>\\n    </div>\\n  </ng-container>\\n</ion-content>\\n<ion-footer class=\\\"footer\\\" [ngClass]=\\\"{'ion-footer-absolute': !utils.isMobile(), 'focus': showBottomAttachmentButtons}\\\">\\n  <ion-grid class=\\\"white-bg\\\">\\n    <ion-row nowrap class=\\\"ion-no-padding\\\">\\n      <ion-col [size]=\\\"!utils.isMobile() || showBottomAttachmentButtons ? '12' : '9'\\\" class=\\\"ion-align-self-center\\\">\\n        <ion-textarea\\n          placeholder=\\\"Enter your message\\\"\\n          required=\\\"true\\\"\\n          name=\\\"message\\\"\\n          [(ngModel)]=\\\"message\\\"\\n          (ngModelChange)=\\\"typing()\\\"\\n          appAutoresize=\\\"100\\\"\\n          rows=\\\"1\\\"\\n          (ionFocus)=\\\"showBottomAttachmentButtons = true;\\\"\\n        ></ion-textarea>\\n      </ion-col>\\n      <ng-container *ngIf=\\\"utils.isMobile() && !showBottomAttachmentButtons\\\">\\n        <ng-container *ngTemplateOutlet=\\\"attachmentButtons; context: { offset: 0 }\\\"></ng-container>\\n      </ng-container>\\n    </ion-row>\\n    <ion-row nowrap class=\\\"ion-no-padding ion-align-items-end\\\" *ngIf=\\\"!utils.isMobile() || showBottomAttachmentButtons\\\">\\n      <ng-container *ngTemplateOutlet=\\\"attachmentButtons; context: { offset: 8 }\\\"></ng-container>\\n      <ion-col class=\\\"ion-no-padding ion-text-center\\\">\\n        <ion-button (click)=\\\"sendMessage()\\\" type=\\\"submit\\\" fill=\\\"clear\\\" class=\\\"ion-no-padding\\\">\\n          <ion-icon name=\\\"send-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-footer>\\n\\n<ng-template #attachmentButtons let-offset=\\\"offset\\\">\\n  <ion-col [offset]=\\\"offset\\\" class=\\\"ion-no-padding ion-text-center\\\">\\n    <ion-button (click)=\\\"attach('video')\\\" fill=\\\"clear\\\" class=\\\"ion-no-padding\\\">\\n      <ion-icon name=\\\"film-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\n    </ion-button>\\n  </ion-col>\\n  <ion-col class=\\\"ion-no-padding ion-text-center\\\">\\n    <ion-button (click)=\\\"attach('image')\\\" fill=\\\"clear\\\" class=\\\"ion-no-padding\\\">\\n      <ion-icon name=\\\"images-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\n    </ion-button>\\n  </ion-col>\\n  <ion-col class=\\\"ion-no-padding ion-text-center\\\">\\n    <ion-button (click)=\\\"attach('any')\\\" fill=\\\"clear\\\" class=\\\"ion-no-padding\\\">\\n      <ion-icon name=\\\"attach-outline\\\" slot=\\\"icon-only\\\"></ion-icon>\\n    </ion-button>\\n  </ion-col>\\n</ng-template>\\n\"","export default \"<ion-split-pane *ngIf=\\\"!utils.isMobile()\\\" contentId=\\\"main\\\" when=\\\"xs\\\">\\n  <app-chat-list\\n    #chatList\\n    style=\\\"display: flex\\\"\\n    [currentChat]=\\\"getCurrentChat()\\\"\\n    (navigate)=\\\"goto($event)\\\"\\n    (chatListReady)=\\\"selectFirstChat($event)\\\">\\n  </app-chat-list>\\n  <ion-content color=\\\"light\\\" id=\\\"main\\\">\\n    <app-chat-room #chatRoom *ngIf=\\\"teamId\\\"\\n      [teamId]=\\\"teamId\\\"\\n      [teamMemberId]=\\\"teamMemberId\\\"\\n      [participantsOnly]=\\\"participantsOnly\\\"\\n      [chatName]=\\\"chatName\\\"></app-chat-room>\\n  </ion-content>\\n</ion-split-pane>\\n\\n<ion-content *ngIf=\\\"utils.isMobile()\\\">\\n  <app-chat-list #chatList></app-chat-list>\\n</ion-content>\\n\"","export default \".ion-toolbar-absolute {\\n  text-align: center;\\n}\\n\\nion-avatar {\\n  text-align: center;\\n}\\n\\nion-avatar ion-icon {\\n  width: 32px;\\n  height: 32px;\\n  color: white;\\n}\\n\\nion-avatar.color-team {\\n  background-color: var(--ion-color-primary);\\n}\\n\\nclickable-item .bold {\\n  font-weight: bold;\\n}\\n\\nclickable-item .item-inner {\\n  border: none !important;\\n}\\n\\nclickable-item ion-label {\\n  margin: 10px 0 10px 0 !important;\\n}\\n\\nclickable-item ion-label .chat-name-container {\\n  display: -webkit-inline-box !important;\\n  display: inline-flex !important;\\n  flex-wrap: wrap;\\n  text-overflow: inherit;\\n  overflow: inherit;\\n  width: 100% !important;\\n}\\n\\nclickable-item ion-label .chat-name-container span {\\n  border: 1px solid var(--ion-color-primary);\\n  padding: 1px 5px 0 5px;\\n  border-radius: 10px;\\n  vertical-align: baseline;\\n  text-align: center;\\n  white-space: nowrap;\\n  max-width: 70% !important;\\n  text-overflow: inherit;\\n  overflow: inherit;\\n  color: var(--ion-color-primary);\\n}\\n\\nclickable-item ion-label .chat-name-container .chat-name {\\n  text-overflow: inherit;\\n  overflow: inherit;\\n  max-width: 90%;\\n  width: -webkit-fit-content;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  margin-right: 3px;\\n}\\n\\nclickable-item ion-label .chat-name-container .chat-name.team-channel {\\n  margin-right: 3px;\\n  max-width: -webkit-fill-available !important;\\n  width: auto !important;\\n}\\n\\nclickable-item ion-label .chat-name-container .chat-name.team-channel .chat-name-container {\\n  display: block !important;\\n}\\n\\nclickable-item .time-container {\\n  width: 22% !important;\\n  display: grid;\\n  justify-items: end;\\n  margin-left: 4px !important;\\n}\\n\\nclickable-item .time-container ion-badge {\\n  margin-top: 2px;\\n  max-width: 43px !important;\\n  max-height: 20px;\\n  min-width: 20px;\\n  min-height: 20px;\\n  border-radius: 8px !important;\\n  width: -webkit-fit-content;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n}\\n\\n.desktop-view .time-container {\\n  width: auto !important;\\n  height: 100%;\\n  padding-bottom: 10px;\\n  padding-top: 10px;\\n}\\n\\n.desktop-view clickable-item ion-label .chat-name-container span {\\n  max-width: none !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaGF3L1dvcmtzcGFjZXMvd3d3L2ludGVyc2VjdGl2ZS9wcmFjdGVyYS1hcHAtdjIvc3JjL2FwcC9jaGF0L2NoYXQtbGlzdC9jaGF0LWxpc3QuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0FDQ0Y7O0FEQ0E7RUFDRSxrQkFBQTtBQ0VGOztBRERFO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0FDR0o7O0FEQ0U7RUFDRSwwQ0FBQTtBQ0NKOztBREtFO0VBQ0UsaUJBQUE7QUNGSjs7QURJRTtFQUNFLHVCQUFBO0FDRko7O0FES0U7RUFDRSxnQ0FBQTtBQ0hKOztBREtJO0VBQ0Usc0NBQUE7RUFBQSwrQkFBQTtFQUNBLGVBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0VBQ0Esc0JBQUE7QUNITjs7QURLTTtFQUNFLDBDQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLHdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0VBQ0Esc0JBQUE7RUFDQSxpQkFBQTtFQUNBLCtCQUFBO0FDSFI7O0FETU07RUFDRSxzQkFBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtFQUNBLDBCQUFBO0VBQUEsdUJBQUE7RUFBQSxrQkFBQTtFQUNBLGlCQUFBO0FDSlI7O0FETVE7RUFDRSxpQkFBQTtFQUNBLDRDQUFBO0VBQ0Esc0JBQUE7QUNKVjs7QURLVTtFQUNFLHlCQUFBO0FDSFo7O0FEV0U7RUFDRSxxQkFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLDJCQUFBO0FDVEo7O0FEV0k7RUFDRSxlQUFBO0VBQ0EsMEJBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLDZCQUFBO0VBQ0EsMEJBQUE7RUFBQSx1QkFBQTtFQUFBLGtCQUFBO0FDVE47O0FEZUU7RUFDRSxzQkFBQTtFQUNBLFlBQUE7RUFDQSxvQkFBQTtFQUNBLGlCQUFBO0FDWko7O0FEaUJRO0VBQ0UsMEJBQUE7QUNmViIsImZpbGUiOiJzcmMvYXBwL2NoYXQvY2hhdC1saXN0L2NoYXQtbGlzdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pb24tdG9vbGJhci1hYnNvbHV0ZSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbmlvbi1hdmF0YXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGlvbi1pY29uIHtcbiAgICB3aWR0aDogMzJweDtcbiAgICBoZWlnaHQ6IDMycHg7XG4gICAgY29sb3I6IHdoaXRlO1xuICB9XG5cbiAgLy8gY2hhdCBhdmF0YXIgY29sb3JzXG4gICYuY29sb3ItdGVhbSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICB9XG5cbn1cblxuY2xpY2thYmxlLWl0ZW0ge1xuICAuYm9sZCB7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cbiAgLml0ZW0taW5uZXIge1xuICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICB9XG5cbiAgaW9uLWxhYmVsIHtcbiAgICBtYXJnaW46IDEwcHggMCAxMHB4IDAgIWltcG9ydGFudDtcblxuICAgIC5jaGF0LW5hbWUtY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4ICFpbXBvcnRhbnQ7XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB0ZXh0LW92ZXJmbG93OiBpbmhlcml0O1xuICAgICAgb3ZlcmZsb3c6IGluaGVyaXQ7XG4gICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuXG4gICAgICBzcGFuIHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICAgICAgICBwYWRkaW5nOiAxcHggNXB4IDAgNXB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgbWF4LXdpZHRoOiA3MCUgIWltcG9ydGFudDtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogaW5oZXJpdDtcbiAgICAgICAgb3ZlcmZsb3c6IGluaGVyaXQ7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG4gICAgICB9XG5cbiAgICAgIC5jaGF0LW5hbWUge1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBpbmhlcml0O1xuICAgICAgICBvdmVyZmxvdzogaW5oZXJpdDtcbiAgICAgICAgbWF4LXdpZHRoOiA5MCU7XG4gICAgICAgIHdpZHRoOiBmaXQtY29udGVudDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAzcHg7XG5cbiAgICAgICAgJi50ZWFtLWNoYW5uZWwge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogM3B4O1xuICAgICAgICAgIG1heC13aWR0aDogLXdlYmtpdC1maWxsLWF2YWlsYWJsZSAhaW1wb3J0YW50O1xuICAgICAgICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgICAgICAgLmNoYXQtbmFtZS1jb250YWluZXIge1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgfVxuXG4gIC50aW1lLWNvbnRhaW5lciB7XG4gICAgd2lkdGg6IDIyJSAhaW1wb3J0YW50O1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAganVzdGlmeS1pdGVtczogZW5kO1xuICAgIG1hcmdpbi1sZWZ0OiA0cHggIWltcG9ydGFudDtcblxuICAgIGlvbi1iYWRnZSB7XG4gICAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgICBtYXgtd2lkdGg6IDQzcHggIWltcG9ydGFudDtcbiAgICAgIG1heC1oZWlnaHQ6IDIwcHg7XG4gICAgICBtaW4td2lkdGg6IDIwcHg7XG4gICAgICBtaW4taGVpZ2h0OiAyMHB4O1xuICAgICAgYm9yZGVyLXJhZGl1czogOHB4ICFpbXBvcnRhbnQ7XG4gICAgICB3aWR0aDogZml0LWNvbnRlbnQ7XG4gICAgfVxuXG4gIH1cbn1cbi5kZXNrdG9wLXZpZXcge1xuICAudGltZS1jb250YWluZXIge1xuICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xuICB9XG4gIGNsaWNrYWJsZS1pdGVtIHtcbiAgICBpb24tbGFiZWwge1xuICAgICAgLmNoYXQtbmFtZS1jb250YWluZXIge1xuICAgICAgICBzcGFuIHtcbiAgICAgICAgICBtYXgtd2lkdGg6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLmlvbi10b29sYmFyLWFic29sdXRlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5pb24tYXZhdGFyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuaW9uLWF2YXRhciBpb24taWNvbiB7XG4gIHdpZHRoOiAzMnB4O1xuICBoZWlnaHQ6IDMycHg7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cbmlvbi1hdmF0YXIuY29sb3ItdGVhbSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbn1cblxuY2xpY2thYmxlLWl0ZW0gLmJvbGQge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cbmNsaWNrYWJsZS1pdGVtIC5pdGVtLWlubmVyIHtcbiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG59XG5jbGlja2FibGUtaXRlbSBpb24tbGFiZWwge1xuICBtYXJnaW46IDEwcHggMCAxMHB4IDAgIWltcG9ydGFudDtcbn1cbmNsaWNrYWJsZS1pdGVtIGlvbi1sYWJlbCAuY2hhdC1uYW1lLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4ICFpbXBvcnRhbnQ7XG4gIGZsZXgtd3JhcDogd3JhcDtcbiAgdGV4dC1vdmVyZmxvdzogaW5oZXJpdDtcbiAgb3ZlcmZsb3c6IGluaGVyaXQ7XG4gIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG59XG5jbGlja2FibGUtaXRlbSBpb24tbGFiZWwgLmNoYXQtbmFtZS1jb250YWluZXIgc3BhbiB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbiAgcGFkZGluZzogMXB4IDVweCAwIDVweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIG1heC13aWR0aDogNzAlICFpbXBvcnRhbnQ7XG4gIHRleHQtb3ZlcmZsb3c6IGluaGVyaXQ7XG4gIG92ZXJmbG93OiBpbmhlcml0O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xufVxuY2xpY2thYmxlLWl0ZW0gaW9uLWxhYmVsIC5jaGF0LW5hbWUtY29udGFpbmVyIC5jaGF0LW5hbWUge1xuICB0ZXh0LW92ZXJmbG93OiBpbmhlcml0O1xuICBvdmVyZmxvdzogaW5oZXJpdDtcbiAgbWF4LXdpZHRoOiA5MCU7XG4gIHdpZHRoOiBmaXQtY29udGVudDtcbiAgbWFyZ2luLXJpZ2h0OiAzcHg7XG59XG5jbGlja2FibGUtaXRlbSBpb24tbGFiZWwgLmNoYXQtbmFtZS1jb250YWluZXIgLmNoYXQtbmFtZS50ZWFtLWNoYW5uZWwge1xuICBtYXJnaW4tcmlnaHQ6IDNweDtcbiAgbWF4LXdpZHRoOiAtd2Via2l0LWZpbGwtYXZhaWxhYmxlICFpbXBvcnRhbnQ7XG4gIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG59XG5jbGlja2FibGUtaXRlbSBpb24tbGFiZWwgLmNoYXQtbmFtZS1jb250YWluZXIgLmNoYXQtbmFtZS50ZWFtLWNoYW5uZWwgLmNoYXQtbmFtZS1jb250YWluZXIge1xuICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50O1xufVxuY2xpY2thYmxlLWl0ZW0gLnRpbWUtY29udGFpbmVyIHtcbiAgd2lkdGg6IDIyJSAhaW1wb3J0YW50O1xuICBkaXNwbGF5OiBncmlkO1xuICBqdXN0aWZ5LWl0ZW1zOiBlbmQ7XG4gIG1hcmdpbi1sZWZ0OiA0cHggIWltcG9ydGFudDtcbn1cbmNsaWNrYWJsZS1pdGVtIC50aW1lLWNvbnRhaW5lciBpb24tYmFkZ2Uge1xuICBtYXJnaW4tdG9wOiAycHg7XG4gIG1heC13aWR0aDogNDNweCAhaW1wb3J0YW50O1xuICBtYXgtaGVpZ2h0OiAyMHB4O1xuICBtaW4td2lkdGg6IDIwcHg7XG4gIG1pbi1oZWlnaHQ6IDIwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweCAhaW1wb3J0YW50O1xuICB3aWR0aDogZml0LWNvbnRlbnQ7XG59XG5cbi5kZXNrdG9wLXZpZXcgLnRpbWUtY29udGFpbmVyIHtcbiAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgcGFkZGluZy10b3A6IDEwcHg7XG59XG4uZGVza3RvcC12aWV3IGNsaWNrYWJsZS1pdGVtIGlvbi1sYWJlbCAuY2hhdC1uYW1lLWNvbnRhaW5lciBzcGFuIHtcbiAgbWF4LXdpZHRoOiBub25lICFpbXBvcnRhbnQ7XG59Il19 */\"","import { Component, Output, EventEmitter, NgZone, Input } from '@angular/core';\nimport { Router, NavigationExtras } from '@angular/router';\nimport { BrowserStorageService } from '@services/storage.service';\nimport { RouterEnter } from '@services/router-enter.service';\nimport { UtilsService } from '@services/utils.service';\nimport { FastFeedbackService } from '../../fast-feedback/fast-feedback.service';\nimport { ChatService, ChatListObject } from '../chat.service';\nimport { NewRelicService } from '@shared/new-relic/new-relic.service';\n\n@Component({\n  selector: 'app-chat-list',\n  templateUrl: 'chat-list.component.html',\n  styleUrls: ['chat-list.component.scss']\n})\nexport class ChatListComponent {\n  @Output() navigate = new EventEmitter();\n  @Output() chatListReady = new EventEmitter();\n  @Input() currentChat = {};\n  chatList: Array<ChatListObject>;\n  haveMoreTeam: boolean;\n  loadingChatList = true;\n\n  constructor(\n    private chatService: ChatService,\n    public router: Router,\n    public storage: BrowserStorageService,\n    public utils: UtilsService,\n    public fastFeedbackService: FastFeedbackService,\n    private newrelic: NewRelicService,\n    private ngZone: NgZone\n  ) {\n    this.newrelic.setPageViewName('Chat list');\n\n    const role = this.storage.getUser().role;\n    this.utils.getEvent('team-message').subscribe(event => {\n      this._loadChatData();\n    });\n    if (role !== 'mentor') {\n      this.utils.getEvent('team-no-mentor-message').subscribe(event => {\n        this._loadChatData();\n      });\n    }\n    if (!this.utils.isMobile()) {\n      this.utils.getEvent('chat-badge-update').subscribe(event => {\n        const chatIndex = this.chatList.findIndex((data, index) => {\n          return (event.teamID === data.team_id) &&\n          (event.teamMemberId === data.team_member_id) &&\n          (event.chatName === data.name) &&\n          (event.participantsOnly === data.participants_only);\n        });\n        if (chatIndex > -1) {\n          // set time out because when this calling from pusher events it need a time out.\n          setTimeout(() => {\n            this.chatList[chatIndex].unread_messages -= event.readcount;\n          });\n        }\n      });\n    }\n  }\n\n  onEnter() {\n    this._initialise();\n    this._loadChatData();\n    this.fastFeedbackService.pullFastFeedback().subscribe();\n  }\n\n  private _initialise() {\n    this.haveMoreTeam = false;\n    this.loadingChatList = true;\n    this.chatList = new Array();\n  }\n\n  private _loadChatData(): void {\n    this.chatService.getchatList().subscribe(chats => {\n      this.chatList = chats;\n      this._checkHaveMoreTeam();\n      this.chatListReady.emit(this.chatList);\n    });\n  }\n\n  /**\n   * this method check is this user in multiple teams.\n   */\n  private _checkHaveMoreTeam(): void {\n    if (this.chatList.length > 0) {\n      const myRole = this.storage.getUser().role;\n      let index = 0;\n      let teamCount = 0;\n      for (index = 0; index < this.chatList.length; index++) {\n        if (this.chatList[index].is_team) {\n          if (myRole === 'mentor' || !this.chatList[index].participants_only) {\n            teamCount++;\n          }\n        }\n      }\n      if (teamCount > 1) {\n        this.haveMoreTeam = true;\n      } else {\n        this.haveMoreTeam = false;\n      }\n      this.loadingChatList = false;\n    }\n  }\n\n  // force every navigation happen under radar of angular\n  private _navigate(direction) {\n    if (this.utils.isMobile()) {\n      // redirect to chat room page for mobile\n      return this.ngZone.run(() => {\n        return this.router.navigate(direction);\n      });\n    } else {\n      // emit event to parent component(chat view component)\n      if (direction[2] === 'team') {\n        this.navigate.emit({\n          teamId: direction[3],\n          participantsOnly: direction[4],\n          chatName: direction[5] ? direction[5].name : null\n        });\n        return;\n      } else {\n        this.navigate.emit({\n          teamId: direction[2],\n          teamMemberId: direction[3],\n          chatName: direction[4] ? direction[4].name : null\n        });\n        return;\n      }\n    }\n  }\n\n  navigateToChatRoom(chat) {\n    this.newrelic.addPageAction('selected chat room', {\n      isTeam: chat.is_team,\n      raw: chat,\n    });\n\n    if (chat.is_team) {\n      this._navigate([\n        'chat',\n        'chat-room',\n        'team',\n        chat.team_id,\n        chat.participants_only,\n        {\n          name: chat.name\n        }\n      ]);\n    } else {\n      this._navigate([\n        'chat',\n        'chat-room',\n        chat.team_id,\n        chat.team_member_id,\n        {\n          name: chat.name\n        }\n      ]);\n    }\n  }\n\n  getChatDate(date) {\n    return this.utils.timeFormatter(date);\n  }\n\n}\n","export default \".wrapper {\\n  height: 100%;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n}\\n\\nvideo {\\n  max-width: 100%;\\n  max-height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaGF3L1dvcmtzcGFjZXMvd3d3L2ludGVyc2VjdGl2ZS9wcmFjdGVyYS1hcHAtdjIvc3JjL2FwcC9jaGF0L2NoYXQtcHJldmlldy9jaGF0LXByZXZpZXcuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NoYXQvY2hhdC1wcmV2aWV3L2NoYXQtcHJldmlldy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQUE7RUFDQSxvQkFBQTtFQUFBLGFBQUE7RUFDQSx5QkFBQTtVQUFBLG1CQUFBO0VBQ0Esd0JBQUE7VUFBQSx1QkFBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9jaGF0L2NoYXQtcHJldmlldy9jaGF0LXByZXZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIud3JhcHBlciB7XG4gIGhlaWdodDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbnZpZGVvIHtcbiAgbWF4LXdpZHRoOiAxMDAlO1xuICBtYXgtaGVpZ2h0OiAxMDAlO1xufVxuIiwiLndyYXBwZXIge1xuICBoZWlnaHQ6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG52aWRlbyB7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgbWF4LWhlaWdodDogMTAwJTtcbn0iXX0= */\"","import { Component } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'chat-preview',\n  templateUrl: 'chat-preview.component.html',\n  styleUrls: ['chat-preview.component.scss']\n})\nexport class ChatPreviewComponent {\n  file: any = {};\n\n  constructor(\n    public modalController: ModalController,\n    public sanitizer: DomSanitizer\n  ) {}\n\n  download() {\n    return window.open(this.file.url, '_system');\n  }\n\n  close() {\n    this.modalController.dismiss();\n  }\n}\n","export default \".not-started-empty-status {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%);\\n}\\n.not-started-empty-status .head-text {\\n  margin-bottom: 0px;\\n  margin-top: 0px;\\n}\\n.not-started-empty-status .head-text.desktop {\\n  margin-top: 24px;\\n}\\n.not-started-empty-status .sub-text {\\n  margin-top: 5px;\\n}\\n.not-started-empty-status .image {\\n  min-width: 96px;\\n  min-height: 96px;\\n  max-width: 96px;\\n  max-height: 96px;\\n}\\n.not-started-empty-status .image.desktop {\\n  min-width: 120px;\\n  min-height: 120px;\\n  max-width: 120px;\\n  max-height: 120px;\\n}\\n.chat-list {\\n  background-color: transparent !important;\\n}\\n.chat-list ion-item ion-avatar {\\n  width: 32px;\\n  height: 32px;\\n  margin: 0 12px 2px 0 !important;\\n  margin-left: -8px !important;\\n}\\n.chat-list ion-item ion-avatar.no-time {\\n  margin-top: 8% !important;\\n}\\n.chat-list ion-item ion-avatar.no-time-team {\\n  margin-top: -8% !important;\\n}\\n.chat-list ion-item ion-label .time {\\n  width: 100%;\\n  text-align: center;\\n  margin-bottom: 8px;\\n}\\n.chat-list ion-item ion-label .message-body {\\n  padding: 8px 16px;\\n  min-width: 48px;\\n  max-width: 224px;\\n  border-radius: 25px;\\n  width: -webkit-fit-content;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n}\\n.chat-list ion-item ion-label .message-body.image {\\n  background: none !important;\\n  line-height: 0;\\n  padding: 0;\\n  cursor: pointer;\\n}\\n.chat-list ion-item ion-label .message-body p, .chat-list ion-item ion-label .message-body .message-text {\\n  color: black;\\n  margin: 0;\\n  text-align: left;\\n  -webkit-user-select: all !important;\\n     -moz-user-select: all !important;\\n      -ms-user-select: all !important;\\n          user-select: all !important;\\n  white-space: pre-wrap !important;\\n}\\n.chat-list ion-item ion-label .message-body.video-attachment-container {\\n  min-width: 224px;\\n  min-height: 125px;\\n  background: #eaeaea !important;\\n  line-height: 0;\\n  padding: 0;\\n  display: block;\\n  position: relative;\\n  cursor: pointer;\\n  border: 1px #bbbbbb solid;\\n}\\n.chat-list ion-item ion-label .message-body.video-attachment-container #inner-box {\\n  border-radius: inherit;\\n  min-width: inherit;\\n  min-height: inherit;\\n  position: absolute;\\n  padding: 0;\\n}\\n.chat-list ion-item ion-label .message-body.video-attachment-container #inner-box p {\\n  color: var(--ion-color-primary);\\n  margin-top: 1.5em;\\n  text-align: center;\\n}\\n.chat-list ion-item ion-label .message-body.video-attachment-container #inner-box p ion-icon {\\n  font-size: 5em !important;\\n}\\n.chat-list ion-item ion-label .message-body.video-attachment-container .video {\\n  padding: inherit;\\n  min-width: 100%;\\n  max-width: inherit;\\n  min-height: 100%;\\n  max-height: inherit;\\n  border-radius: inherit;\\n}\\n.chat-list ion-item ion-label .message-body.video-attachment-container .label {\\n  margin-left: 0.8em;\\n  text-shadow: 1px 1px white;\\n}\\n.chat-list ion-item ion-label .message-body.video-attachment-container:hover {\\n  background: #bbbbbb !important;\\n  opacity: 0.9;\\n  -webkit-transition: 0.5s opacity, 0.5s background;\\n  transition: 0.5s opacity, 0.5s background;\\n}\\n.chat-list ion-item ion-label .seen-text {\\n  padding: 8px 16px;\\n}\\n.chat-list ion-item ion-label.received-messages {\\n  text-align: left;\\n}\\n.chat-list ion-item ion-label.received-messages .message-body {\\n  background-color: white;\\n}\\n.chat-list ion-item ion-label.received-messages .time {\\n  margin-left: -14% !important;\\n  width: -webkit-fill-available !important;\\n}\\n.chat-list ion-item ion-label.received-messages.no-avatar {\\n  margin-left: 12%;\\n}\\n.chat-list ion-item ion-label.send-messages {\\n  text-align: right;\\n  margin-right: 0;\\n}\\n.chat-list ion-item ion-label.send-messages .message-body {\\n  background-color: var(--ion-color-primary);\\n  float: right;\\n}\\n.chat-list ion-item ion-label.send-messages .message-body.general-attachment {\\n  background: white;\\n}\\n.chat-list ion-item ion-label.send-messages .message-body .message-text {\\n  color: white !important;\\n}\\n.chat-list.desktop-view ion-item ion-avatar {\\n  margin-left: 0 !important;\\n  margin-top: 3% !important;\\n}\\n.chat-list.desktop-view ion-item ion-avatar.no-time {\\n  margin-top: 0 !important;\\n}\\n.chat-list.desktop-view ion-item ion-avatar.no-time-team {\\n  margin-top: -3% !important;\\n}\\n.chat-list.desktop-view ion-item ion-avatar.with-time-team {\\n  margin-top: 0 !important;\\n}\\n.chat-list.desktop-view ion-item ion-label .time {\\n  margin-left: 2.5% !important;\\n}\\n.chat-list.desktop-view ion-item ion-label.received-messages .time {\\n  margin-left: 0 !important;\\n}\\n.chat-list.desktop-view ion-item ion-label.received-messages.no-avatar {\\n  margin-left: 44px !important;\\n}\\n.message-sending-loading {\\n  width: 100% !important;\\n  text-align: right !important;\\n}\\n.message-typing {\\n  width: 100% !important;\\n  text-align: left !important;\\n}\\n.ion-content-absolute-with-footer {\\n  height: calc(100% - 155px);\\n}\\n.footer {\\n  min-height: 48px;\\n  padding: 0;\\n}\\n.footer.ion-footer-absolute {\\n  height: 96px;\\n}\\n.footer.ion-footer-absolute ion-grid {\\n  padding: 0;\\n  min-height: 96px;\\n}\\n.footer.focus {\\n  min-height: 96px;\\n}\\n.footer.focus ion-grid {\\n  padding: 0;\\n  min-height: 96px;\\n}\\n.footer ion-grid {\\n  background-color: white;\\n  min-height: 48px;\\n}\\n.footer ion-grid ion-row {\\n  min-height: 48px;\\n}\\n.footer ion-grid ion-row ion-col {\\n  min-height: 48px;\\n}\\n.footer ion-grid ion-row ion-col ion-button {\\n  padding-top: 6px;\\n  min-height: 24px;\\n  max-height: 100px;\\n  height: auto;\\n}\\n.footer ion-grid ion-row ion-col ion-button ion-icon {\\n  font-size: 24px;\\n}\\n.footer ion-grid ion-row ion-col ion-textarea {\\n  --padding-top: 0;\\n  --padding-end: 0;\\n  --padding-bottom: 0;\\n  --padding-start: 0;\\n  margin-top: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaGF3L1dvcmtzcGFjZXMvd3d3L2ludGVyc2VjdGl2ZS9wcmFjdGVyYS1hcHAtdjIvc3JjL2FwcC9jaGF0L2NoYXQtcm9vbS9jaGF0LXJvb20uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NoYXQvY2hhdC1yb29tL2NoYXQtcm9vbS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSx3Q0FBQTtVQUFBLGdDQUFBO0FDREY7QURFRTtFQUNFLGtCQUFBO0VBQ0EsZUFBQTtBQ0FKO0FEQ0k7RUFDRSxnQkFBQTtBQ0NOO0FERUU7RUFDRSxlQUFBO0FDQUo7QURFRTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtBQ0FKO0FEQ0k7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtBQ0NOO0FESUE7RUFDRSx3Q0FBQTtBQ0RGO0FER0k7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLCtCQUFBO0VBQ0EsNEJBQUE7QUNETjtBREVNO0VBQ0UseUJBQUE7QUNBUjtBREVNO0VBQ0UsMEJBQUE7QUNBUjtBREtNO0VBQ0UsV0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7QUNIUjtBRE1NO0VBQ0UsaUJBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBekRZO0VBMERaLG1CQUFBO0VBQ0EsMEJBQUE7RUFBQSx1QkFBQTtFQUFBLGtCQUFBO0FDSlI7QURNUTtFQUNFLDJCQUFBO0VBQ0EsY0FBQTtFQUNBLFVBQUE7RUFDQSxlQUFBO0FDSlY7QURPUTtFQUNFLFlBQUE7RUFDQSxTQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQ0FBQTtLQUFBLGdDQUFBO01BQUEsK0JBQUE7VUFBQSwyQkFBQTtFQUNBLGdDQUFBO0FDTFY7QURRUTtFQUNFLGdCQTdFVTtFQThFVixpQkFBQTtFQUNBLDhCQUFBO0VBQ0EsY0FBQTtFQUNBLFVBQUE7RUFDQSxjQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7QUNOVjtBRFFVO0VBQ0Usc0JBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxVQUFBO0FDTlo7QURRWTtFQUNFLCtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQ05kO0FET2M7RUFDRSx5QkFBQTtBQ0xoQjtBRFVVO0VBQ0UsZ0JBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0Esc0JBQUE7QUNSWjtBRFdVO0VBQ0Usa0JBQUE7RUFDQSwwQkFBQTtBQ1RaO0FEWVU7RUFDRSw4QkFBQTtFQUNBLFlBQUE7RUFDQSxpREFBQTtFQUFBLHlDQUFBO0FDVlo7QURlTTtFQUNFLGlCQUFBO0FDYlI7QURnQk07RUFDRSxnQkFBQTtBQ2RSO0FEZ0JRO0VBQ0UsdUJBQUE7QUNkVjtBRGlCUTtFQUNFLDRCQUFBO0VBQ0Esd0NBQUE7QUNmVjtBRGtCUTtFQUNFLGdCQUFBO0FDaEJWO0FEb0JNO0VBQ0UsaUJBQUE7RUFDQSxlQUFBO0FDbEJSO0FEb0JRO0VBQ0UsMENBQUE7RUFRQSxZQUFBO0FDekJWO0FEb0JVO0VBQ0UsaUJBQUE7QUNsQlo7QUR3QlU7RUFDRSx1QkFBQTtBQ3RCWjtBRCtCTTtFQUNFLHlCQUFBO0VBQ0EseUJBQUE7QUM3QlI7QUQ4QlE7RUFDRSx3QkFBQTtBQzVCVjtBRDhCUTtFQUNFLDBCQUFBO0FDNUJWO0FEOEJRO0VBQ0Usd0JBQUE7QUM1QlY7QURnQ1E7RUFDRSw0QkFBQTtBQzlCVjtBRGlDVTtFQUNFLHlCQUFBO0FDL0JaO0FEaUNVO0VBQ0UsNEJBQUE7QUMvQlo7QUR1Q0E7RUFDRSxzQkFBQTtFQUNBLDRCQUFBO0FDcENGO0FEdUNBO0VBQ0Usc0JBQUE7RUFDQSwyQkFBQTtBQ3BDRjtBRHNDQTtFQUNFLDBCQUFBO0FDbkNGO0FEc0NBO0VBQ0UsZ0JBQUE7RUFDQSxVQUFBO0FDbkNGO0FEcUNFO0VBQ0UsWUFBQTtBQ25DSjtBRG9DSTtFQUNFLFVBQUE7RUFDQSxnQkFBQTtBQ2xDTjtBRHNDRTtFQUNFLGdCQUFBO0FDcENKO0FEcUNJO0VBQ0UsVUFBQTtFQUNBLGdCQUFBO0FDbkNOO0FEdUNFO0VBQ0UsdUJBQUE7RUFDQSxnQkFBQTtBQ3JDSjtBRHNDSTtFQUNFLGdCQUFBO0FDcENOO0FEcUNNO0VBQ0UsZ0JBQUE7QUNuQ1I7QURvQ1E7RUFDRSxnQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0FDbENWO0FEbUNVO0VBQ0UsZUFBQTtBQ2pDWjtBRG9DUTtFQUNFLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtBQ2xDViIsImZpbGUiOiJzcmMvYXBwL2NoYXQvY2hhdC1yb29tL2NoYXQtcm9vbS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiRtZXNzYWdlLWJvZHktc2l6ZTogMjI0cHg7XG5cbi5ub3Qtc3RhcnRlZC1lbXB0eS1zdGF0dXMge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNTAlO1xuICBsZWZ0OiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7XG4gIC5oZWFkLXRleHQge1xuICAgIG1hcmdpbi1ib3R0b206IDBweDtcbiAgICBtYXJnaW4tdG9wOiAwcHg7XG4gICAgJi5kZXNrdG9wIHtcbiAgICAgIG1hcmdpbi10b3A6IDI0cHg7XG4gICAgfVxuICB9XG4gIC5zdWItdGV4dCB7XG4gICAgbWFyZ2luLXRvcDogNXB4O1xuICB9XG4gIC5pbWFnZSB7XG4gICAgbWluLXdpZHRoOiA5NnB4O1xuICAgIG1pbi1oZWlnaHQ6IDk2cHg7XG4gICAgbWF4LXdpZHRoOiA5NnB4O1xuICAgIG1heC1oZWlnaHQ6IDk2cHg7XG4gICAgJi5kZXNrdG9wIHtcbiAgICAgIG1pbi13aWR0aDogMTIwcHg7XG4gICAgICBtaW4taGVpZ2h0OiAxMjBweDtcbiAgICAgIG1heC13aWR0aDogMTIwcHg7XG4gICAgICBtYXgtaGVpZ2h0OiAxMjBweDtcbiAgICB9XG4gIH1cbn1cblxuLmNoYXQtbGlzdCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gIGlvbi1pdGVtIHtcbiAgICBpb24tYXZhdGFyIHtcbiAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgbWFyZ2luOiAwIDEycHggMnB4IDAgIWltcG9ydGFudDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAtOHB4ICFpbXBvcnRhbnQ7XG4gICAgICAmLm5vLXRpbWUge1xuICAgICAgICBtYXJnaW4tdG9wOiA4JSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgJi5uby10aW1lLXRlYW0ge1xuICAgICAgICBtYXJnaW4tdG9wOiAtOCUgIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpb24tbGFiZWwge1xuICAgICAgLnRpbWUge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5tZXNzYWdlLWJvZHkge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgbWluLXdpZHRoOiA0OHB4O1xuICAgICAgICBtYXgtd2lkdGg6ICRtZXNzYWdlLWJvZHktc2l6ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMjVweDtcbiAgICAgICAgd2lkdGg6IGZpdC1jb250ZW50O1xuXG4gICAgICAgICYuaW1hZ2Uge1xuICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMDtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHAsIC5tZXNzYWdlLXRleHQge1xuICAgICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogYWxsICFpbXBvcnRhbnQ7XG4gICAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAmLnZpZGVvLWF0dGFjaG1lbnQtY29udGFpbmVyIHtcbiAgICAgICAgICBtaW4td2lkdGg6ICRtZXNzYWdlLWJvZHktc2l6ZTtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAxMjVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZWFlYWVhICFpbXBvcnRhbnQ7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDA7XG4gICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICBkaXNwbGF5OmJsb2NrO1xuICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBib3JkZXI6IDFweCAjYmJiYmJiIHNvbGlkO1xuXG4gICAgICAgICAgI2lubmVyLWJveCB7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuICAgICAgICAgICAgbWluLXdpZHRoOiBpbmhlcml0O1xuICAgICAgICAgICAgbWluLWhlaWdodDogaW5oZXJpdDtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XG5cbiAgICAgICAgICAgIHAge1xuICAgICAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxLjVlbTtcbiAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgICBpb24taWNvbiB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiA1ZW0gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC52aWRlbyB7XG4gICAgICAgICAgICBwYWRkaW5nOiBpbmhlcml0O1xuICAgICAgICAgICAgbWluLXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgbWF4LXdpZHRoOiBpbmhlcml0O1xuICAgICAgICAgICAgbWluLWhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIG1heC1oZWlnaHQ6IGluaGVyaXQ7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5sYWJlbCB7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMC44ZW07XG4gICAgICAgICAgICB0ZXh0LXNoYWRvdzogMXB4IDFweCB3aGl0ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNiYmJiYmIgIWltcG9ydGFudDtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuOTtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IDAuNXMgb3BhY2l0eSwgMC41cyBiYWNrZ3JvdW5kO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAuc2Vlbi10ZXh0IHtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICB9XG5cbiAgICAgICYucmVjZWl2ZWQtbWVzc2FnZXMge1xuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuXG4gICAgICAgIC5tZXNzYWdlLWJvZHkge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLnRpbWUge1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtMTQlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgd2lkdGg6IC13ZWJraXQtZmlsbC1hdmFpbGFibGUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuXG4gICAgICAgICYubm8tYXZhdGFyIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMTIlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICYuc2VuZC1tZXNzYWdlcyB7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDA7XG5cbiAgICAgICAgLm1lc3NhZ2UtYm9keSB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuXG4gICAgICAgICAgLy8gY29uc2lzdGVudCBjb2xvdXIgdG8gbWFrZSBhdHRhY2htZW50IHN0YW5kb3V0XG4gICAgICAgICAgJi5nZW5lcmFsLWF0dGFjaG1lbnQge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbWFyZ2luLWxlZnQ6IGNhbGMoMTAwJSAtIDE1MHB4KSAhaW1wb3J0YW50O1xuICAgICAgICAgIGZsb2F0OiByaWdodDtcblxuICAgICAgICAgIC5tZXNzYWdlLXRleHQge1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJi5kZXNrdG9wLXZpZXcge1xuICAgIGlvbi1pdGVtIHtcbiAgICAgIGlvbi1hdmF0YXIge1xuICAgICAgICBtYXJnaW4tbGVmdDogMCAhaW1wb3J0YW50O1xuICAgICAgICBtYXJnaW4tdG9wOiAzJSAhaW1wb3J0YW50O1xuICAgICAgICAmLm5vLXRpbWUge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICAmLm5vLXRpbWUtdGVhbSB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogLTMlICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgJi53aXRoLXRpbWUtdGVhbSB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpb24tbGFiZWwge1xuICAgICAgICAudGltZSB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDIuNSUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICAmLnJlY2VpdmVkLW1lc3NhZ2VzIHtcbiAgICAgICAgICAudGltZSB7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMCAhaW1wb3J0YW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICAmLm5vLWF2YXRhciB7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogNDRweCAhaW1wb3J0YW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4ubWVzc2FnZS1zZW5kaW5nLWxvYWRpbmcge1xuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50O1xufVxuXG4ubWVzc2FnZS10eXBpbmcge1xuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICB0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7XG59XG4uaW9uLWNvbnRlbnQtYWJzb2x1dGUtd2l0aC1mb290ZXIge1xuICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDE1NXB4KTtcbn1cblxuLmZvb3RlciB7XG4gIG1pbi1oZWlnaHQ6IDQ4cHg7XG4gIHBhZGRpbmc6IDA7XG5cbiAgJi5pb24tZm9vdGVyLWFic29sdXRlIHtcbiAgICBoZWlnaHQ6IDk2cHg7XG4gICAgaW9uLWdyaWQge1xuICAgICAgcGFkZGluZzogMDtcbiAgICAgIG1pbi1oZWlnaHQ6IDk2cHg7XG4gICAgfVxuICB9XG5cbiAgJi5mb2N1cyB7XG4gICAgbWluLWhlaWdodDogOTZweDtcbiAgICBpb24tZ3JpZCB7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgICAgbWluLWhlaWdodDogOTZweDtcbiAgICB9XG4gIH1cblxuICBpb24tZ3JpZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgbWluLWhlaWdodDogNDhweDtcbiAgICBpb24tcm93IHtcbiAgICAgIG1pbi1oZWlnaHQ6IDQ4cHg7XG4gICAgICBpb24tY29sIHtcbiAgICAgICAgbWluLWhlaWdodDogNDhweDtcbiAgICAgICAgaW9uLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZy10b3A6IDZweDtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAyNHB4O1xuICAgICAgICAgIG1heC1oZWlnaHQ6IDEwMHB4O1xuICAgICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgICBpb24taWNvbiB7XG4gICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlvbi10ZXh0YXJlYSB7XG4gICAgICAgICAgLS1wYWRkaW5nLXRvcDogMDtcbiAgICAgICAgICAtLXBhZGRpbmctZW5kOiAwO1xuICAgICAgICAgIC0tcGFkZGluZy1ib3R0b206IDA7XG4gICAgICAgICAgLS1wYWRkaW5nLXN0YXJ0OiAwO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLm5vdC1zdGFydGVkLWVtcHR5LXN0YXR1cyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCU7XG4gIGxlZnQ6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG59XG4ubm90LXN0YXJ0ZWQtZW1wdHktc3RhdHVzIC5oZWFkLXRleHQge1xuICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gIG1hcmdpbi10b3A6IDBweDtcbn1cbi5ub3Qtc3RhcnRlZC1lbXB0eS1zdGF0dXMgLmhlYWQtdGV4dC5kZXNrdG9wIHtcbiAgbWFyZ2luLXRvcDogMjRweDtcbn1cbi5ub3Qtc3RhcnRlZC1lbXB0eS1zdGF0dXMgLnN1Yi10ZXh0IHtcbiAgbWFyZ2luLXRvcDogNXB4O1xufVxuLm5vdC1zdGFydGVkLWVtcHR5LXN0YXR1cyAuaW1hZ2Uge1xuICBtaW4td2lkdGg6IDk2cHg7XG4gIG1pbi1oZWlnaHQ6IDk2cHg7XG4gIG1heC13aWR0aDogOTZweDtcbiAgbWF4LWhlaWdodDogOTZweDtcbn1cbi5ub3Qtc3RhcnRlZC1lbXB0eS1zdGF0dXMgLmltYWdlLmRlc2t0b3Age1xuICBtaW4td2lkdGg6IDEyMHB4O1xuICBtaW4taGVpZ2h0OiAxMjBweDtcbiAgbWF4LXdpZHRoOiAxMjBweDtcbiAgbWF4LWhlaWdodDogMTIwcHg7XG59XG5cbi5jaGF0LWxpc3Qge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tYXZhdGFyIHtcbiAgd2lkdGg6IDMycHg7XG4gIGhlaWdodDogMzJweDtcbiAgbWFyZ2luOiAwIDEycHggMnB4IDAgIWltcG9ydGFudDtcbiAgbWFyZ2luLWxlZnQ6IC04cHggIWltcG9ydGFudDtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWF2YXRhci5uby10aW1lIHtcbiAgbWFyZ2luLXRvcDogOCUgIWltcG9ydGFudDtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWF2YXRhci5uby10aW1lLXRlYW0ge1xuICBtYXJnaW4tdG9wOiAtOCUgIWltcG9ydGFudDtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWxhYmVsIC50aW1lIHtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwgLm1lc3NhZ2UtYm9keSB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBtaW4td2lkdGg6IDQ4cHg7XG4gIG1heC13aWR0aDogMjI0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDI1cHg7XG4gIHdpZHRoOiBmaXQtY29udGVudDtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWxhYmVsIC5tZXNzYWdlLWJvZHkuaW1hZ2Uge1xuICBiYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7XG4gIGxpbmUtaGVpZ2h0OiAwO1xuICBwYWRkaW5nOiAwO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG4uY2hhdC1saXN0IGlvbi1pdGVtIGlvbi1sYWJlbCAubWVzc2FnZS1ib2R5IHAsIC5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWxhYmVsIC5tZXNzYWdlLWJvZHkgLm1lc3NhZ2UtdGV4dCB7XG4gIGNvbG9yOiBibGFjaztcbiAgbWFyZ2luOiAwO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICB1c2VyLXNlbGVjdDogYWxsICFpbXBvcnRhbnQ7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcCAhaW1wb3J0YW50O1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwgLm1lc3NhZ2UtYm9keS52aWRlby1hdHRhY2htZW50LWNvbnRhaW5lciB7XG4gIG1pbi13aWR0aDogMjI0cHg7XG4gIG1pbi1oZWlnaHQ6IDEyNXB4O1xuICBiYWNrZ3JvdW5kOiAjZWFlYWVhICFpbXBvcnRhbnQ7XG4gIGxpbmUtaGVpZ2h0OiAwO1xuICBwYWRkaW5nOiAwO1xuICBkaXNwbGF5OiBibG9jaztcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJvcmRlcjogMXB4ICNiYmJiYmIgc29saWQ7XG59XG4uY2hhdC1saXN0IGlvbi1pdGVtIGlvbi1sYWJlbCAubWVzc2FnZS1ib2R5LnZpZGVvLWF0dGFjaG1lbnQtY29udGFpbmVyICNpbm5lci1ib3gge1xuICBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuICBtaW4td2lkdGg6IGluaGVyaXQ7XG4gIG1pbi1oZWlnaHQ6IGluaGVyaXQ7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcGFkZGluZzogMDtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWxhYmVsIC5tZXNzYWdlLWJvZHkudmlkZW8tYXR0YWNobWVudC1jb250YWluZXIgI2lubmVyLWJveCBwIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbiAgbWFyZ2luLXRvcDogMS41ZW07XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWxhYmVsIC5tZXNzYWdlLWJvZHkudmlkZW8tYXR0YWNobWVudC1jb250YWluZXIgI2lubmVyLWJveCBwIGlvbi1pY29uIHtcbiAgZm9udC1zaXplOiA1ZW0gIWltcG9ydGFudDtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWxhYmVsIC5tZXNzYWdlLWJvZHkudmlkZW8tYXR0YWNobWVudC1jb250YWluZXIgLnZpZGVvIHtcbiAgcGFkZGluZzogaW5oZXJpdDtcbiAgbWluLXdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IGluaGVyaXQ7XG4gIG1pbi1oZWlnaHQ6IDEwMCU7XG4gIG1heC1oZWlnaHQ6IGluaGVyaXQ7XG4gIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7XG59XG4uY2hhdC1saXN0IGlvbi1pdGVtIGlvbi1sYWJlbCAubWVzc2FnZS1ib2R5LnZpZGVvLWF0dGFjaG1lbnQtY29udGFpbmVyIC5sYWJlbCB7XG4gIG1hcmdpbi1sZWZ0OiAwLjhlbTtcbiAgdGV4dC1zaGFkb3c6IDFweCAxcHggd2hpdGU7XG59XG4uY2hhdC1saXN0IGlvbi1pdGVtIGlvbi1sYWJlbCAubWVzc2FnZS1ib2R5LnZpZGVvLWF0dGFjaG1lbnQtY29udGFpbmVyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogI2JiYmJiYiAhaW1wb3J0YW50O1xuICBvcGFjaXR5OiAwLjk7XG4gIHRyYW5zaXRpb246IDAuNXMgb3BhY2l0eSwgMC41cyBiYWNrZ3JvdW5kO1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwgLnNlZW4tdGV4dCB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwucmVjZWl2ZWQtbWVzc2FnZXMge1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwucmVjZWl2ZWQtbWVzc2FnZXMgLm1lc3NhZ2UtYm9keSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwucmVjZWl2ZWQtbWVzc2FnZXMgLnRpbWUge1xuICBtYXJnaW4tbGVmdDogLTE0JSAhaW1wb3J0YW50O1xuICB3aWR0aDogLXdlYmtpdC1maWxsLWF2YWlsYWJsZSAhaW1wb3J0YW50O1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwucmVjZWl2ZWQtbWVzc2FnZXMubm8tYXZhdGFyIHtcbiAgbWFyZ2luLWxlZnQ6IDEyJTtcbn1cbi5jaGF0LWxpc3QgaW9uLWl0ZW0gaW9uLWxhYmVsLnNlbmQtbWVzc2FnZXMge1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgbWFyZ2luLXJpZ2h0OiAwO1xufVxuLmNoYXQtbGlzdCBpb24taXRlbSBpb24tbGFiZWwuc2VuZC1tZXNzYWdlcyAubWVzc2FnZS1ib2R5IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICBmbG9hdDogcmlnaHQ7XG59XG4uY2hhdC1saXN0IGlvbi1pdGVtIGlvbi1sYWJlbC5zZW5kLW1lc3NhZ2VzIC5tZXNzYWdlLWJvZHkuZ2VuZXJhbC1hdHRhY2htZW50IHtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG59XG4uY2hhdC1saXN0IGlvbi1pdGVtIGlvbi1sYWJlbC5zZW5kLW1lc3NhZ2VzIC5tZXNzYWdlLWJvZHkgLm1lc3NhZ2UtdGV4dCB7XG4gIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xufVxuLmNoYXQtbGlzdC5kZXNrdG9wLXZpZXcgaW9uLWl0ZW0gaW9uLWF2YXRhciB7XG4gIG1hcmdpbi1sZWZ0OiAwICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi10b3A6IDMlICFpbXBvcnRhbnQ7XG59XG4uY2hhdC1saXN0LmRlc2t0b3AtdmlldyBpb24taXRlbSBpb24tYXZhdGFyLm5vLXRpbWUge1xuICBtYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7XG59XG4uY2hhdC1saXN0LmRlc2t0b3AtdmlldyBpb24taXRlbSBpb24tYXZhdGFyLm5vLXRpbWUtdGVhbSB7XG4gIG1hcmdpbi10b3A6IC0zJSAhaW1wb3J0YW50O1xufVxuLmNoYXQtbGlzdC5kZXNrdG9wLXZpZXcgaW9uLWl0ZW0gaW9uLWF2YXRhci53aXRoLXRpbWUtdGVhbSB7XG4gIG1hcmdpbi10b3A6IDAgIWltcG9ydGFudDtcbn1cbi5jaGF0LWxpc3QuZGVza3RvcC12aWV3IGlvbi1pdGVtIGlvbi1sYWJlbCAudGltZSB7XG4gIG1hcmdpbi1sZWZ0OiAyLjUlICFpbXBvcnRhbnQ7XG59XG4uY2hhdC1saXN0LmRlc2t0b3AtdmlldyBpb24taXRlbSBpb24tbGFiZWwucmVjZWl2ZWQtbWVzc2FnZXMgLnRpbWUge1xuICBtYXJnaW4tbGVmdDogMCAhaW1wb3J0YW50O1xufVxuLmNoYXQtbGlzdC5kZXNrdG9wLXZpZXcgaW9uLWl0ZW0gaW9uLWxhYmVsLnJlY2VpdmVkLW1lc3NhZ2VzLm5vLWF2YXRhciB7XG4gIG1hcmdpbi1sZWZ0OiA0NHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5tZXNzYWdlLXNlbmRpbmctbG9hZGluZyB7XG4gIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gIHRleHQtYWxpZ246IHJpZ2h0ICFpbXBvcnRhbnQ7XG59XG5cbi5tZXNzYWdlLXR5cGluZyB7XG4gIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gIHRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDtcbn1cblxuLmlvbi1jb250ZW50LWFic29sdXRlLXdpdGgtZm9vdGVyIHtcbiAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAxNTVweCk7XG59XG5cbi5mb290ZXIge1xuICBtaW4taGVpZ2h0OiA0OHB4O1xuICBwYWRkaW5nOiAwO1xufVxuLmZvb3Rlci5pb24tZm9vdGVyLWFic29sdXRlIHtcbiAgaGVpZ2h0OiA5NnB4O1xufVxuLmZvb3Rlci5pb24tZm9vdGVyLWFic29sdXRlIGlvbi1ncmlkIHtcbiAgcGFkZGluZzogMDtcbiAgbWluLWhlaWdodDogOTZweDtcbn1cbi5mb290ZXIuZm9jdXMge1xuICBtaW4taGVpZ2h0OiA5NnB4O1xufVxuLmZvb3Rlci5mb2N1cyBpb24tZ3JpZCB7XG4gIHBhZGRpbmc6IDA7XG4gIG1pbi1oZWlnaHQ6IDk2cHg7XG59XG4uZm9vdGVyIGlvbi1ncmlkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gIG1pbi1oZWlnaHQ6IDQ4cHg7XG59XG4uZm9vdGVyIGlvbi1ncmlkIGlvbi1yb3cge1xuICBtaW4taGVpZ2h0OiA0OHB4O1xufVxuLmZvb3RlciBpb24tZ3JpZCBpb24tcm93IGlvbi1jb2wge1xuICBtaW4taGVpZ2h0OiA0OHB4O1xufVxuLmZvb3RlciBpb24tZ3JpZCBpb24tcm93IGlvbi1jb2wgaW9uLWJ1dHRvbiB7XG4gIHBhZGRpbmctdG9wOiA2cHg7XG4gIG1pbi1oZWlnaHQ6IDI0cHg7XG4gIG1heC1oZWlnaHQ6IDEwMHB4O1xuICBoZWlnaHQ6IGF1dG87XG59XG4uZm9vdGVyIGlvbi1ncmlkIGlvbi1yb3cgaW9uLWNvbCBpb24tYnV0dG9uIGlvbi1pY29uIHtcbiAgZm9udC1zaXplOiAyNHB4O1xufVxuLmZvb3RlciBpb24tZ3JpZCBpb24tcm93IGlvbi1jb2wgaW9uLXRleHRhcmVhIHtcbiAgLS1wYWRkaW5nLXRvcDogMDtcbiAgLS1wYWRkaW5nLWVuZDogMDtcbiAgLS1wYWRkaW5nLWJvdHRvbTogMDtcbiAgLS1wYWRkaW5nLXN0YXJ0OiAwO1xuICBtYXJnaW4tdG9wOiA4cHg7XG59Il19 */\"","import { Component, Input, ViewChild, NgZone, AfterContentInit, AfterViewInit, ElementRef } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { IonContent, ModalController } from '@ionic/angular';\nimport { BrowserStorageService } from '@services/storage.service';\nimport { RouterEnter } from '@services/router-enter.service';\nimport { UtilsService } from '@services/utils.service';\nimport { PusherService } from '@shared/pusher/pusher.service';\nimport { FilestackService } from '@shared/filestack/filestack.service';\n\nimport { ChatService, ChatRoomObject, Message } from '../chat.service';\nimport { ChatPreviewComponent } from '../chat-preview/chat-preview.component';\nimport { NewRelicService } from '@shared/new-relic/new-relic.service';\n\n@Component({\n  selector: 'app-chat-room',\n  templateUrl: './chat-room.component.html',\n  styleUrls: ['./chat-room.component.scss']\n})\nexport class ChatRoomComponent extends RouterEnter {\n  @ViewChild(IonContent) content: IonContent;\n  @Input() teamId: number;\n  @Input() teamMemberId: number;\n  @Input() participantsOnly: boolean;\n  @Input() chatName: string;\n\n  routeUrl = '/chat-room/';\n  message: string;\n  messageList: Array<Message> = new Array;\n  selectedChat: ChatRoomObject = {\n    name: '',\n    is_team: false,\n    team_id: null,\n    team_member_id: null,\n    participants_only: false\n  };\n  messagePageNumber = 0;\n  messagePagesize = 20;\n  loadingChatMessages = true;\n  loadingMesageSend = false;\n  isTyping = false;\n  typingMessage: string;\n  // this use to show/hide bottom section of text field which have attachment buttons and send button,\n  // when user typing text messages\n  showBottomAttachmentButtons = false;\n\n  constructor(\n    private chatService: ChatService,\n    public router: Router,\n    public storage: BrowserStorageService,\n    private route: ActivatedRoute,\n    public utils: UtilsService,\n    public pusherService: PusherService,\n    private filestackService: FilestackService,\n    private modalController: ModalController,\n    private ngZone: NgZone,\n    public element: ElementRef,\n    private newrelic: NewRelicService\n  ) {\n    super(router);\n    this.newrelic.setPageViewName(`Chat room: ${JSON.stringify(this.selectedChat)}`);\n\n    const role = this.storage.getUser().role;\n\n    // message by team\n    this.utils.getEvent('team-message').subscribe(event => {\n      const param = {\n        event: event,\n        isTeam: this.selectedChat.is_team,\n        chatName: this.selectedChat.name,\n        participants_only: this.selectedChat.participants_only\n      };\n      const receivedMessage = this.chatService.getMessageFromEvent(param);\n      if (receivedMessage && receivedMessage.file) {\n        receivedMessage.preview = this.attachmentPreview(receivedMessage.file);\n      }\n\n      if (!this.utils.isEmpty(receivedMessage)) {\n        this.messageList.push(receivedMessage);\n        this._markAsSeen();\n        this._scrollToBottom();\n      }\n    });\n\n    // singal by team typing\n    this.utils.getEvent('team-typing').subscribe(event => {\n      this._showTyping(event);\n    });\n\n    // message by non-mentor\n    if (role !== 'mentor') {\n      this.utils.getEvent('team-no-mentor-message').subscribe(event => {\n        const param = {\n          event: event,\n          isTeam: this.selectedChat.is_team,\n          chatName: this.selectedChat.name,\n          participants_only: this.selectedChat.participants_only\n        };\n        const receivedMessage =  this.chatService.getMessageFromEvent(param);\n        if (receivedMessage && receivedMessage.file) {\n          receivedMessage.preview = this.attachmentPreview(receivedMessage.file);\n        }\n\n        if (!this.utils.isEmpty(receivedMessage)) {\n          this._markAsSeen();\n          this.messageList.push(receivedMessage);\n        }\n      });\n      this.utils.getEvent('team-no-mentor-typing').subscribe(event => {\n        this._showTyping(event);\n      });\n    }\n  }\n\n  onEnter() {\n    this._initialise();\n    this._validateRouteParams();\n    this._loadMessages();\n    this._scrollToBottom();\n  }\n\n  private _initialise() {\n    this.message = '';\n    this.messageList = [];\n    this.loadingChatMessages = true;\n    this.selectedChat = {\n      name: '',\n      is_team: false,\n      team_id: null,\n      team_member_id: null,\n      participants_only: false\n    };\n    this.messagePageNumber = 0;\n    this.messagePagesize = 20;\n    this.loadingMesageSend = false;\n    this.isTyping = false;\n    this.typingMessage = '';\n    this.showBottomAttachmentButtons = false;\n  }\n\n  private _validateRouteParams() {\n    // if teamId pass as @Input parameter get team id from it\n    // if not get it from route params.\n    if (this.teamId) {\n      this.selectedChat.team_id = this.teamId;\n    } else {\n      this.selectedChat.team_id = Number(this.route.snapshot.paramMap.get('teamId'));\n    }\n    // if teamMemberId pass as @Input parameter get team id from it\n    // if not get it from route params.\n    if (this.teamMemberId) {\n      this.selectedChat.team_member_id = this.teamMemberId;\n    } else {\n      this.selectedChat.team_member_id = Number(this.route.snapshot.paramMap.get('teamMemberId'));\n    }\n    // if we didn't have team member id in selected chat object mark this chat as a team chat.\n    if (!this.selectedChat.team_member_id) {\n      this.selectedChat.is_team = true;\n    }\n    // if participantsOnly pass as @Input parameter get team id from it\n    // if not get it from route params.\n    if (this.participantsOnly) {\n      this.selectedChat.participants_only = this.participantsOnly;\n    } else {\n      this.selectedChat.participants_only = JSON.parse(this.route.snapshot.paramMap.get('participantsOnly'));\n    }\n  }\n\n  private _loadMessages() {\n    this.loadingChatMessages = true;\n    let data: any;\n    this.messagePageNumber += 1;\n    // creating params need to load messages.\n    if (this.selectedChat.is_team) {\n      data = {\n        team_id: this.selectedChat.team_id,\n        page: this.messagePageNumber,\n        size: this.messagePagesize,\n        participants_only: this.selectedChat.participants_only\n      };\n    } else {\n      data = {\n        team_id: this.selectedChat.team_id,\n        page: this.messagePageNumber,\n        size: this.messagePagesize,\n        team_member_id: this.selectedChat.team_member_id\n      };\n    }\n    this.chatService\n      .getMessageList(data, this.selectedChat.is_team)\n      .subscribe(\n        messages => {\n          if (messages) {\n            if (messages.length > 0) {\n              messages.forEach((msg, i) => {\n                if (msg.file) {\n                  messages[i].preview = this.attachmentPreview(msg.file);\n                }\n              });\n\n              messages = Object.assign([], messages);\n              messages.reverse();\n              if (this.messageList.length > 0) {\n                this.messageList = messages.concat(this.messageList);\n              } else {\n                this.messageList = messages;\n                this._scrollToBottom();\n              }\n              this._markAsSeen();\n            } else {\n              this.messagePageNumber -= 1;\n            }\n            this._getChatName();\n          }\n          this.loadingChatMessages = false;\n        },\n        error => {\n          this.loadingChatMessages = false;\n        }\n      );\n  }\n\n  loadMoreMessages(event) {\n    const scrollTopPosition = event.detail.scrollTop;\n    if (scrollTopPosition === 0) {\n      this._loadMessages();\n    }\n  }\n\n  private _getChatName() {\n    // if it is a team chat, use the team name as the chat title\n    if (this.selectedChat.is_team) {\n      this.chatService.getTeamName(this.selectedChat.team_id)\n        .subscribe(teamName => {\n          if (this.selectedChat.participants_only) {\n            this.selectedChat.team_name = teamName;\n          } else {\n            // if it is not participant only, add \"+ Mentor\" as the chat title\n            this.selectedChat.team_name = teamName + ' + Mentor';\n          }\n          this.loadingChatMessages = false;\n          return;\n        }\n      );\n    }\n    // if the chat name is passed in as parameter, use it\n    if (this.chatName) {\n      this.selectedChat.name = this.chatName;\n      this.loadingChatMessages = false;\n      return;\n    }\n    if (this.route.snapshot.paramMap.get('name')) {\n      this.selectedChat.name = this.route.snapshot.paramMap.get('name');\n      this.loadingChatMessages = false;\n      return;\n    }\n    // get the chat title from messge list\n    const message = this.messageList[0];\n    if (message) {\n      if (message.is_sender) {\n        // if the current user is sender, the chat name will be the receiver name\n        this.selectedChat.name = message.receiver_name;\n      } else {\n        // if the current user is not the sender, the chat name will be the sender name\n        this.selectedChat.name = message.sender_name;\n      }\n    }\n    this.loadingChatMessages = false;\n  }\n\n  back() {\n    return this.ngZone.run(() => this.router.navigate(['app', 'chat']));\n  }\n\n  sendMessage() {\n    if (!this.message) {\n      return;\n    }\n    this.loadingMesageSend = true;\n    const message = this.message;\n    // remove typed message from text area and shrink text area.\n    this.message = '';\n    this.element.nativeElement.querySelector('textarea').style.height = 'auto';\n    // createing prams need to send message\n    let data: any;\n    if (this.selectedChat.is_team) {\n      data = {\n        message: message,\n        team_id: this.selectedChat.team_id,\n        to: 'team',\n        participants_only: this.selectedChat.participants_only\n      };\n    } else {\n      data = {\n        message: message,\n        team_id: this.selectedChat.team_id,\n        to: this.selectedChat.team_member_id\n      };\n    }\n    this.chatService.postNewMessage(data).subscribe(\n      response => {\n        this.messageList.push(response.data);\n        this.loadingMesageSend = false;\n        this._scrollToBottom();\n        this.showBottomAttachmentButtons = false;\n      },\n      error => {\n        this.loadingMesageSend = false;\n        this.showBottomAttachmentButtons = false;\n      }\n    );\n  }\n\n  // call chat api to mark message as seen messages\n  private _markAsSeen() {\n    const messageIdList = [];\n    let index = 0;\n    // createing id array to mark as read.\n    for (index = 0; index < this.messageList.length; index++) {\n      messageIdList.push(this.messageList[index].id);\n    }\n    this.chatService\n      .markMessagesAsSeen({\n        id: JSON.stringify(messageIdList),\n        team_id: this.selectedChat.team_id\n      })\n      .subscribe (\n        response => {\n          if (!this.utils.isMobile()) {\n            this.utils.broadcastEvent('chat-badge-update', {\n              teamID : this.selectedChat.team_id,\n              teamMemberId: this.selectedChat.team_member_id ? this.selectedChat.team_member_id : null,\n              chatName: this.chatName,\n              participantsOnly : this.selectedChat.participants_only ? this.selectedChat.participants_only : false,\n              readcount: messageIdList.length\n            });\n          }\n        },\n        err => {}\n      );\n  }\n\n  getMessageDate(date) {\n    return this.utils.timeFormatter(date);\n  }\n\n  /**\n   * this method will return correct css class for chat avatar to adjust view\n   * @param message message object\n   * - if selected chat is a team chat and we are not showing time with this message.\n   *  - return 'no-time-team' css class. it will add 'margin-top: -8%' to avatar.\n   * - if selected chat is not a team and we are not showing time with this message.\n   *  - return 'no-time' css class. it will add 'margin-top: 8%' to avatar.\n   * - if user not in mobile platform and selected chat is a team and we are showing time with this message.\n   *  - return 'with-time-team' css class. it will add 'margin-top: 0' to avatar.\n   * - if these conditions not complete\n   *  - return empty srting.\n   */\n  getAvatarClass(message) {\n    if (!this.checkToShowMessageTime(message) && this.selectedChat.is_team) {\n      return 'no-time-team';\n    }\n    if (!this.checkToShowMessageTime(message) && !this.selectedChat.is_team) {\n      return 'no-time';\n    }\n    if (!this.utils.isMobile() && (this.checkToShowMessageTime(message) && this.selectedChat.is_team)) {\n      return 'with-time-team';\n    }\n    return '';\n  }\n\n  /**\n   * check same user have messages inline\n   * @param {int} message\n   */\n  checkIsLastMessage(message) {\n    const index = this.messageList.indexOf(message);\n    if (index === -1) {\n      this.messageList[index].noAvatar = true;\n      return false;\n    }\n    const currentMessage = this.messageList[index];\n    const nextMessage = this.messageList[index + 1];\n    if (currentMessage.is_sender) {\n      this.messageList[index].noAvatar = true;\n      return false;\n    }\n    if (!nextMessage) {\n      this.messageList[index].noAvatar = false;\n      return true;\n    }\n    const currentMessageTime = new Date(this.messageList[index].sent_time);\n    const nextMessageTime = new Date(this.messageList[index + 1].sent_time);\n    if (currentMessage.sender_name !== nextMessage.sender_name) {\n      this.messageList[index].noAvatar = false;\n      return true;\n    }\n    const timeDiff =\n      (nextMessageTime.getTime() - currentMessageTime.getTime()) /\n      (60 * 1000);\n    if (timeDiff > 5) {\n      this.messageList[index].noAvatar = false;\n      return true;\n    } else {\n      this.messageList[index].noAvatar = true;\n      return false;\n    }\n  }\n\n  /**\n   * check message sender and return related css class\n   * @param {object} message\n   */\n  getClassForMessageBubble(message) {\n    if (!message.is_sender && message.noAvatar) {\n      return 'received-messages no-avatar';\n    } else if (!message.is_sender && !message.noAvatar) {\n      return 'received-messages';\n    } else {\n      return 'send-messages';\n    }\n  }\n\n  /**\n   * check date and time diffrance between current message(message object of index) old message.\n   * @param {int} message\n   */\n  checkToShowMessageTime(message) {\n    const index = this.messageList.indexOf(message);\n    if (index <= -1) {\n      return;\n    }\n    // show message time for the first message\n    if (!this.messageList[index - 1]) {\n      return true;\n    }\n    const currentMessageTime = new Date(this.messageList[index].sent_time);\n    const oldMessageTime = new Date(this.messageList[index - 1].sent_time);\n    if ((currentMessageTime.getDate() - oldMessageTime.getDate()) === 0) {\n      return this._checkmessageOldThan5Min(\n        currentMessageTime,\n        oldMessageTime\n      );\n    }\n    return true;\n  }\n\n  /**\n   * check time diffrance larger than 5 min.\n   * @param {object} currentMessageTime\n   * @param {object} oldMessageTime\n   */\n  private _checkmessageOldThan5Min(currentMessageTime, oldMessageTime) {\n    const timeDiff =\n      (currentMessageTime.getTime() - oldMessageTime.getTime()) / (60 * 1000);\n    if (timeDiff > 5) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Trigger typing event when user is typing\n   */\n  typing() {\n    if (!this.utils.isEmpty(this.message)) {\n      this.showBottomAttachmentButtons = true;\n      this._scrollToBottom();\n    } else {\n      this.showBottomAttachmentButtons = false;\n    }\n    this.pusherService.triggerTyping(\n      {\n        from: this.pusherService.getMyPresenceChannelId(),\n        to: this.selectedChat.name,\n        is_team: this.selectedChat.is_team,\n        team_id: this.selectedChat.team_id,\n        participants_only: this.selectedChat.participants_only,\n        sender_name: this.storage.getUser().name\n      },\n      this.selectedChat.participants_only\n    );\n  }\n\n  private _showTyping(event) {\n    const presenceChannelId = this.pusherService.getMyPresenceChannelId();\n    // do not display typing message if it is yourself typing, or it is not for your team\n    if (presenceChannelId === event.from || this.selectedChat.team_id !== event.team_id) {\n      return ;\n    }\n    // show the typing message if it is team message and the current page is the team message\n    // or it is individual message and it is for the current user\n    if ((\n          event.is_team && this.selectedChat.is_team &&\n          this.selectedChat.participants_only === event.participants_only\n        ) ||\n        (\n          !event.is_team && !this.selectedChat.is_team &&\n          event.to === this.storage.getUser().name\n        )\n      ) {\n      this.typingMessage = event.sender_name + ' is typing';\n      this._scrollToBottom();\n      this.isTyping = true;\n      setTimeout(\n        () => {\n          this.typingMessage = '';\n          this.isTyping = false;\n        },\n        3000\n      );\n    }\n  }\n\n  private _scrollToBottom() {\n    setTimeout(\n      () => {\n        this.content.scrollToBottom();\n      },\n      500\n    );\n  }\n\n  private attachmentPreview(filestackRes) {\n    let preview = `Uploaded ${filestackRes.filename}`;\n    const dimension = 224;\n    if (filestackRes.mimetype.includes('image')) {\n      const attachmentURL = `https://cdn.filestackcontent.com/quality=value:70/resize=w:${dimension},h:${dimension},fit:crop/${filestackRes.handle}`;\n      // preview = `<p>Uploaded ${filestackRes.filename}</p><img src=${attachmentURL}>`;\n      preview = `<img src=${attachmentURL}>`;\n    } else if (filestackRes.mimetype.includes('video')) {\n      // we'll need to identify filetype for 'any' type fileupload\n      preview = `<app-file-display [file]=\"submission.answer\" [fileType]=\"question.fileType\"></app-file-display>`;\n    }\n\n    return preview;\n  }\n\n  async attach(type: string) {\n    const options: any = {};\n\n    if (this.filestackService.getFileTypes(type)) {\n      options.accept = this.filestackService.getFileTypes(type);\n      options.storeTo = this.filestackService.getS3Config(type);\n    }\n    await this.filestackService.open(\n      options,\n      res => {\n        return this.postAttachment(res);\n      },\n      err => {\n        console.log(err);\n      }\n    );\n  }\n\n  async previewFile(file) {\n    return await this.filestackService.previewFile(file);\n  }\n\n  private postAttachment(file) {\n    if (this.loadingMesageSend) {\n      return;\n    }\n\n    this.loadingMesageSend = true;\n\n    const data: any = {\n      message: null,\n      file,\n      team_id: this.selectedChat.team_id,\n      to: null,\n      participants_only: this.selectedChat.participants_only,\n    };\n    if (this.selectedChat.is_team) {\n      data.to = 'team';\n    } else {\n      data.to = this.selectedChat.team_member_id;\n    }\n\n    this.chatService.postAttachmentMessage(data).subscribe(\n      response => {\n        const message = response.data;\n        message.preview = this.attachmentPreview(file);\n\n        this.messageList.push(message);\n        this.loadingMesageSend = false;\n        this.showBottomAttachmentButtons = false;\n        this._scrollToBottom();\n      },\n      error => {\n        this.loadingMesageSend = false;\n        this.showBottomAttachmentButtons = false;\n        // error feedback to user for failed upload\n      }\n    );\n  }\n\n  private getTypeByMime(mimetype: string): string {\n    const zip = [\n      'application/x-compressed',\n      'application/x-zip-compressed',\n      'application/zip',\n      'multipart/x-zip',\n    ];\n\n    let result = '';\n\n    if (zip.indexOf(mimetype) >= 0) {\n      result = 'Zip';\n\n    // set icon to different document type (excel, word, powerpoint, audio, video)\n    } else if (mimetype.indexOf('audio/') >= 0) {\n      result = 'Audio';\n    } else if (mimetype.indexOf('image/') >= 0) {\n      result = 'Image';\n    } else if (mimetype.indexOf('text/') >= 0) {\n      result = 'Text';\n    } else if (mimetype.indexOf('video/') >= 0) {\n      result = 'Video';\n    } else {\n      switch (mimetype) {\n        case 'application/pdf':\n          result = 'PDF';\n          break;\n        case 'application/msword':\n        case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':\n          result = 'Word';\n          break;\n        case 'application/excel':\n        case 'application/vnd.ms-excel':\n        case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':\n        case 'application/x-excel':\n        case 'application/x-msexcel':\n          result = 'Excel';\n          break;\n        case 'application/mspowerpoint':\n        case 'application/vnd.ms-powerpoint':\n        case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':\n        case 'application/x-mspowerpoint':\n          result = 'Powerpoint';\n          break;\n        default:\n          result = 'File';\n          break;\n      }\n    }\n\n    return result;\n  }\n\n  private getIconByMime(mimetype: string): string {\n    const zip = [\n      'application/x-compressed',\n      'application/x-zip-compressed',\n      'application/zip',\n      'multipart/x-zip',\n    ];\n    let result = '';\n\n    if (zip.indexOf(mimetype) >= 0) {\n      result = 'document';\n    } else if (mimetype.includes('audio')) {\n      result = 'volume-mute';\n    } else if (mimetype.includes('image')) {\n      result = 'photos';\n    } else if (mimetype.includes('text')) {\n      result = 'clipboard-outline';\n    } else if (mimetype.includes('video')) {\n      result = 'videocam';\n    } else {\n      switch (mimetype) {\n        case 'application/pdf':\n          result = 'document'; // 'pdf';\n          break;\n        case 'application/msword':\n        case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':\n          result = 'document'; // 'word';\n          break;\n        case 'application/excel':\n        case 'application/vnd.ms-excel':\n        case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':\n        case 'application/x-excel':\n        case 'application/x-msexcel':\n          result = 'document'; // 'excel';\n          break;\n        case 'application/mspowerpoint':\n        case 'application/vnd.ms-powerpoint':\n        case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':\n        case 'application/x-mspowerpoint':\n          result = 'document'; // 'powerpoint';\n          break;\n        default:\n          result = 'document'; // 'file';\n          break;\n      }\n    }\n\n    return result;\n  }\n\n  async preview(file) {\n    const modal = await this.modalController.create({\n      component: ChatPreviewComponent,\n      componentProps: {\n        file,\n      }\n    });\n    return await modal.present();\n  }\n\n  createThumb(video, w, h) {\n    const c = document.createElement('canvas'),    // create a canvas\n        ctx = c.getContext('2d');                // get context\n    c.width = w;                                 // set size = thumb\n    c.height = h;\n    ctx.drawImage(video, 0, 0, w, h);            // draw in frame\n    return c;                                    // return canvas\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { ChatComponent } from './chat.component';\nimport { ChatViewComponent } from './chat-view/chat-view.component';\nimport { ChatRoomComponent } from './chat-room/chat-room.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatComponent,\n    children: [\n      {\n        path: '',\n        component: ChatViewComponent,\n      }\n    ]\n  },\n  {\n    path: 'chat-room/:teamId/:teamMemberId',\n    component: ChatRoomComponent,\n  },\n  {\n    path: 'chat-room/team/:teamId/:participantsOnly',\n    component: ChatRoomComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ChatRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NoYXQvY2hhdC12aWV3L2NoYXQtdmlldy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { UtilsService } from '@services/utils.service';\nimport { RouterEnter } from '@services/router-enter.service';\n\n@Component({\n  selector: 'app-chat-view',\n  templateUrl: './chat-view.component.html',\n  styleUrls: ['./chat-view.component.scss']\n})\nexport class ChatViewComponent extends RouterEnter {\n\n  routeUrl = '/app/chat';\n  teamMemberId: Number;\n  participantsOnly: boolean;\n  teamId: Number;\n  chatName: string;\n\n  @ViewChild('chatList') chatList;\n  @ViewChild('chatRoom') chatRoom;\n\n  constructor(\n    public router: Router,\n    public utils: UtilsService\n  ) {\n    super(router);\n  }\n\n  onEnter() {\n    this._initialise();\n    setTimeout(() => {\n      this.chatList.onEnter();\n    });\n  }\n\n  private _initialise() {\n    this.teamMemberId = null;\n    this.participantsOnly = null;\n    this.teamId = null;\n    this.chatName = null;\n  }\n\n  goto(event) {\n    this.teamId = event.teamId;\n    this.teamMemberId = event.teamMemberId ? event.teamMemberId : null;\n    this.participantsOnly = event.participantsOnly ? event.participantsOnly : false;\n    this.chatName = event.chatName;\n    setTimeout(() => {\n      this.chatRoom.onEnter();\n    });\n  }\n\n  getCurrentChat() {\n    return {\n      teamId: this.teamId,\n      chatName: this.chatName,\n      teamMemberId: this.teamMemberId,\n      participantsOnly: this.participantsOnly\n    };\n  }\n\n  /**\n   * this method call when chat-list component finished loading chat objects.\n   * from this method we loading first chat to chat room component.\n   * @param chats chat list Array\n   * if we have teamId we are not doing any thing, that means we have already load first chat.\n   * if we didn't have teamId we will goto() method by passing first chat channel data. to load chat.\n   */\n  selectFirstChat(chats) {\n    if (this.teamId) {\n      return;\n    }\n    // navigate to the first chat\n    this.goto({\n      teamId: chats[0].team_id,\n      teamMemberId: chats[0].team_member_id,\n      participantsOnly: chats[0].participants_only,\n      chatName: chats[0].name\n    });\n  }\n\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  template: '<ion-router-outlet></ion-router-outlet>',\n})\nexport class ChatComponent {}\n","import { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '@shared/shared.module';\nimport { ChatComponent } from './chat.component';\nimport { ChatListComponent } from './chat-list/chat-list.component';\nimport { ChatRoomComponent } from './chat-room/chat-room.component';\nimport { ChatPreviewComponent } from './chat-preview/chat-preview.component';\nimport { ChatRoutingModule } from './chat-routing.module';\nimport { ChatService } from './chat.service';\nimport { FilestackModule } from '../shared/filestack/filestack.module';\nimport { FastFeedbackModule } from '../fast-feedback/fast-feedback.module';\nimport { AutoresizeDirective } from '../shared/directives/autoresize/autoresize.directive';\nimport { ChatViewComponent } from './chat-view/chat-view.component';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    ChatRoutingModule,\n    FilestackModule,\n    FastFeedbackModule,\n  ],\n  declarations: [\n    ChatComponent,\n    ChatListComponent,\n    ChatPreviewComponent,\n    ChatRoomComponent,\n    AutoresizeDirective,\n    ChatViewComponent\n  ],\n  entryComponents: [ChatPreviewComponent],\n  providers: [ChatService],\n  exports: [\n    SharedModule,\n    FilestackModule,\n    ChatRoomComponent,\n    FastFeedbackModule\n  ]\n})\nexport class ChatModule {}\n","import { Injectable } from '@angular/core';\nimport { RequestService } from '@shared/request/request.service';\nimport { map } from 'rxjs/operators';\nimport { Observable, of } from 'rxjs';\nimport { UtilsService } from '@services/utils.service';\nimport { PusherService } from '@shared/pusher/pusher.service';\nimport { environment } from '@environments/environment';\n\n/**\n * @name api\n * @description list of api endpoint involved in this service\n * @type {Object}\n */\nconst api = {\n  getChatList: 'api/v2/message/chat/list.json',\n  getChatMessages: 'api/v2/message/chat/list_messages.json',\n  createMessage: 'api/v2/message/chat/create_message',\n  markAsSeen: 'api/v2/message/chat/edit_message',\n  getTeam: 'api/teams.json'\n};\n\nexport interface ChatListObject {\n  team_id: number;\n  team_name: string;\n  team_member_id?: number;\n  name: string;\n  role?: string;\n  unread_messages?: number;\n  last_message_created?: string;\n  last_message?: string;\n  is_team: boolean;\n  participants_only: boolean;\n  team_member_image: string;\n}\n\nexport interface ChatRoomObject {\n  name: string;\n  team_name?: string;\n  is_team?: boolean;\n  team_id: number;\n  team_member_id: number;\n  participants_only?: boolean;\n}\n\nexport interface Message {\n  id?: number;\n  sender_name?: string;\n  receiver_name?: string;\n  message?: string;\n  sent_time?: string;\n  is_sender?: boolean;\n  noAvatar?: boolean;\n  file?: object;\n  preview?: string;\n  sender_image: string;\n}\ninterface NewMessage {\n  to: number | string;\n  message: string;\n  team_id: number;\n  env?: string;\n  participants_only?: boolean;\n  file?: object;\n}\n\ninterface MessageListPrams {\n  team_id: number;\n  team_member_id?: number;\n  page: number;\n  size: number;\n  participants_only?: boolean;\n}\n\ninterface MarkAsSeenPrams {\n  team_id: number;\n  id: string | number;\n  action?: string;\n}\n\ninterface UnreadMessagePrams {\n  filter: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ChatService {\n\n  constructor(\n    private request: RequestService,\n    private utils: UtilsService,\n    private pusherService: PusherService\n  ) {}\n\n  /**\n   * this method return chat list data.\n   */\n  getchatList(): Observable<any> {\n    return this.request.get(api.getChatList).pipe(\n      map(response => {\n        if (response.success && response.data) {\n          return this._normaliseeChatListResponse(response.data);\n        }\n      })\n    );\n  }\n\n  /**\n   * this method return message for one chat.\n   * @param prams\n   *  prams is a json object\n   * {\n   *  team_id: 1234,\n   *  team_member_id: 4567,\n   *  page: 1,\n   *  size:20\n   * }\n   */\n  getMessageList(data: MessageListPrams, isTeam: boolean): Observable<any> {\n    return this.request\n      .get(api.getChatMessages, {\n        params: data\n      })\n      .pipe(\n        map(response => {\n          if (response.success && response.data) {\n            return this._normaliseeMessageListResponse(\n              response.data,\n              isTeam\n            );\n          }\n        })\n      );\n  }\n\n  markMessagesAsSeen(prams: MarkAsSeenPrams): Observable<any> {\n    const body = {\n      team_id: prams.team_id,\n      id: prams.id,\n      action: 'mark_seen'\n    };\n    return this.request.post(api.markAsSeen, body, {\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\n    });\n  }\n\n  /**\n   * @name postNewMessage\n   * @description post new text message (with text) or attachment (with file)\n   * @param  {NewMessage}      data [description]\n   * @return {Observable<any>}      [description]\n   */\n  postNewMessage(data: NewMessage): Observable<any> {\n    const reqData = {\n      to: data.to,\n      message: data.message,\n      team_id: data.team_id,\n      env: environment.env,\n      participants_only: '',\n      file: data.file,\n    };\n    if (data.participants_only) {\n      reqData.participants_only = data.participants_only.toString();\n    } else {\n      delete reqData.participants_only;\n    }\n    return this.request.post(api.createMessage, reqData);\n  }\n\n  postAttachmentMessage(data: NewMessage): Observable<any> {\n    if (!data.file) {\n      throw new Error('Fatal: File value must not be empty.');\n    }\n    return this.postNewMessage(data);\n  }\n\n  unreadMessageCout(data: UnreadMessagePrams): Observable<any> {\n    const body = {\n      unread_count_for: data.filter\n    };\n    return this.request.get(api.getChatMessages, body);\n  }\n\n  getTeamName(id: number): Observable<any> {\n    const data = {\n      team_id: id\n    };\n    return this.request\n      .get(api.getTeam, {\n        params: data\n      })\n      .pipe(\n        map(response => {\n          if (response.success && response.data) {\n            return this._normaliseTeamResponse(response.data);\n          }\n        })\n      );\n  }\n\n  /**\n   * @description listen to pusher event from new/incoming message\n   */\n  getMessageFromEvent(data): Message | null {\n    const presenceChannelId = this.pusherService.getMyPresenceChannelId();\n    // don't show the message if it is from the current user,\n    // or it is not to this user and not a team message\n    if ((presenceChannelId === data.event.from) ||\n        (presenceChannelId !== data.event.to && data.event.to !== 'team')\n      ) {\n      return null;\n    }\n    // show the message if it is team message, and participants_only match\n    // or it is individual message and sender match\n    if (!(\n          (data.isTeam && data.event.to === 'team' &&\n            data.participants_only === data.event.participants_only) ||\n          (data.event.sender_name === data.chatName &&\n            data.event.to !== 'team')\n      )) {\n      return null;\n    }\n    const message = {\n      id: data.event.id,\n      is_sender: data.event.is_sender,\n      message: data.event.message,\n      sender_name: data.event.sender_name,\n      sent_time: data.event.sent_time,\n      file: data.event.file,\n      sender_image: data.event.sender_image\n    };\n    return message;\n  }\n\n  private _normaliseTeamResponse(data) {\n    if (!this.utils.has(data, 'Team')) {\n      return this.request.apiResponseFormatError('Team format error');\n    }\n    return data.Team.name;\n  }\n\n  /**\n   * modify the Chat list response\n   *  - set chat avatar color\n   *  - set chat name\n   * @param {Array} response\n   */\n  private _normaliseeChatListResponse(data) {\n    if (!Array.isArray(data)) {\n      return this.request.apiResponseFormatError('Chat format error');\n    }\n    if (data.length === 0) {\n      return [];\n    }\n    const chats = [];\n    data.forEach(chat => {\n      if (!this.utils.has(chat, 'team_id') ||\n          !this.utils.has(chat, 'is_team') ||\n          !this.utils.has(chat, 'participants_only') ||\n          !this.utils.has(chat, 'name') ||\n          !this.utils.has(chat, 'team_name')\n        ) {\n        return this.request.apiResponseFormatError('Chat object format error');\n      }\n      chat.name = this._getChatName(chat);\n      chats.push(chat);\n    });\n    return chats;\n  }\n\n  private _getChatName(chat) {\n    if (!chat.is_team) {\n      return chat.name;\n    }\n    if (chat.participants_only) {\n      return chat.team_name;\n    } else {\n      return chat.team_name + ' + Mentor';\n    }\n  }\n\n  /**\n   * modify the message list response\n   * @param data\n   * @param isTeam\n   */\n  private _normaliseeMessageListResponse(data, isTeam) {\n    if (!Array.isArray(data)) {\n      return this.request.apiResponseFormatError('Message array format error');\n    }\n    if (data.length === 0) {\n      return [];\n    }\n    const messageList = [];\n    data.forEach(message => {\n      if (!this.utils.has(message, 'id') ||\n          !this.utils.has(message, 'sender_name') ||\n          !this.utils.has(message, 'receiver_name') ||\n          !this.utils.has(message, 'message') ||\n          !this.utils.has(message, 'is_sender')) {\n        return this.request.apiResponseFormatError('Message format error');\n      }\n      messageList.push(message);\n    });\n    return messageList;\n  }\n}\n","import { Directive, ElementRef, Input, HostListener, OnInit } from '@angular/core';\n\n@Directive({\n  selector: '[appAutoresize]'\n})\nexport class AutoresizeDirective implements OnInit {\n\n  // tslint:disable-next-line:no-input-rename\n  @Input('appAutoresize') maxHeight: number;\n\n  @HostListener('input', ['$event.target'])\n  onInput(textArea: HTMLTextAreaElement): void {\n    this.adjust();\n  }\n\n  constructor(public element: ElementRef) { }\n\n  ngOnInit(): void {\n    this.adjust();\n  }\n\n  /**\n   * in this method we resize textarea releted to text in side it.\n   * when user type on textarea it will expand untill scroll height lower than max height.\n   *  if scroll height biger than max height textare will not expand and it will scroll content.\n   * - select textare.\n   * - set 'aoto' to height and overflow properties.\n   * - check min value from scrollheight and maxheight and get it as the newheight.\n   * - set that new height to textarea height.\n   */\n  adjust(): void {\n    const ta = this.element.nativeElement.querySelector('textarea');\n    let newHeight;\n    if (ta) {\n      ta.style.overflow = 'auto';\n      ta.style.height = 'auto';\n      if (this.maxHeight) {\n      newHeight = Math.min(ta.scrollHeight, this.maxHeight);\n      } else {\n        newHeight = ta.scrollHeight;\n      }\n      ta.style.height = newHeight + 'px';\n    }\n  }\n\n}\n"],"sourceRoot":"webpack:///"}