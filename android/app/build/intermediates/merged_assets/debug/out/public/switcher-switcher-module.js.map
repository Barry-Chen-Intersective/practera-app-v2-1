{"version":3,"sources":["./src/app/switcher/switcher-program/switcher-program.component.html","./src/app/switcher/switcher-program/switcher-program.component.scss","./src/app/switcher/switcher-program/switcher-program.component.ts","./src/app/switcher/switcher-routing.module.ts","./src/app/switcher/switcher.component.ts","./src/app/switcher/switcher.module.ts"],"names":[],"mappings":"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","file":"switcher-switcher-module.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar>\\n    <ion-title>Select an experience</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\" color=\\\"light\\\" appFloat>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col size=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"6\\\" size-lg=\\\"4\\\" size-xl=\\\"3\\\" *ngFor=\\\"let program of programs; let i = index\\\">\\n        <ion-card class=\\\"practera-card experience-card\\\" (click)=\\\"switch(i)\\\">\\n          <div class=\\\"image-container\\\">\\n            <img [src]=\\\"program.project.lead_image ? program.project.lead_image : '../../../assets/default-experience-image.svg'\\\" alt=\\\"{{ program.program.name }}\\\"/>\\n          </div>\\n          <ion-card-content>\\n            <clickable-item color=\\\"light\\\" [lines]=\\\"'none'\\\" [backgroundColor]=\\\"program.program.config.theme_color\\\" [isSwitcherCard]=\\\"true\\\">\\n              <ion-label class=\\\"subtitle-1\\\">\\n                {{ program.program.name }}\\n                <!-- <ion-progress-bar *ngIf=\\\"program.progress !== undefined\\\" [value]=\\\"program.progress\\\"></ion-progress-bar> -->\\n              </ion-label>\\n              <!-- <ion-badge *ngIf=\\\"program.todoItems !== undefined\\\" slot=\\\"end\\\">{{ program.todoItems }}</ion-badge> -->\\n              <ion-icon name=\\\"chevron-forward\\\" slot=\\\"end\\\"></ion-icon>\\n            </clickable-item>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\"","export default \"ion-header ion-toolbar > ion-title {\\n  padding-left: 20px;\\n  padding-right: 20px;\\n}\\n\\nion-grid {\\n  --ion-grid-padding: 0;\\n  --ion-grid-padding-lg: 0;\\n  --ion-grid-padding-md: 0;\\n  --ion-grid-padding-sm: 0;\\n  --ion-grid-padding-xl: 0;\\n  --ion-grid-padding-xs: 0;\\n}\\n\\nion-col {\\n  --ion-grid-column-padding: 8px;\\n  --ion-grid-column-padding-lg: 8px;\\n  --ion-grid-column-padding-md: 8px;\\n  --ion-grid-column-padding-sm: 8px;\\n  --ion-grid-column-padding-xl: 8px;\\n  --ion-grid-column-padding-xs: 8px;\\n}\\n\\nion-progress-bar {\\n  margin-top: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaGF3L1dvcmtzcGFjZXMvd3d3L2ludGVyc2VjdGl2ZS9wcmFjdGVyYS1hcHAtdjIvc3JjL2FwcC9zd2l0Y2hlci9zd2l0Y2hlci1wcm9ncmFtL3N3aXRjaGVyLXByb2dyYW0uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3N3aXRjaGVyL3N3aXRjaGVyLXByb2dyYW0vc3dpdGNoZXItcHJvZ3JhbS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFRTtFQUNFLGtCQUFBO0VBQ0EsbUJBQUE7QUNESjs7QURJQTtFQUNFLHFCQUFBO0VBQ0Esd0JBQUE7RUFDQSx3QkFBQTtFQUNBLHdCQUFBO0VBQ0Esd0JBQUE7RUFDQSx3QkFBQTtBQ0RGOztBREdBO0VBQ0UsOEJBQUE7RUFDQSxpQ0FBQTtFQUNBLGlDQUFBO0VBQ0EsaUNBQUE7RUFDQSxpQ0FBQTtFQUNBLGlDQUFBO0FDQUY7O0FERUE7RUFDRSxlQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9zd2l0Y2hlci9zd2l0Y2hlci1wcm9ncmFtL3N3aXRjaGVyLXByb2dyYW0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taGVhZGVyIHtcbiAgLy8gcHJvZ3JhbSBzd2l0Y2hlciB0aXRsZSBubyBtZW51IGJ1dHRvbnMgcmVxdWlyZWRcbiAgaW9uLXRvb2xiYXIgPiBpb24tdGl0bGUge1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xuICB9XG59XG5pb24tZ3JpZCB7XG4gIC0taW9uLWdyaWQtcGFkZGluZzogMDtcbiAgLS1pb24tZ3JpZC1wYWRkaW5nLWxnOiAwO1xuICAtLWlvbi1ncmlkLXBhZGRpbmctbWQ6IDA7XG4gIC0taW9uLWdyaWQtcGFkZGluZy1zbTogMDtcbiAgLS1pb24tZ3JpZC1wYWRkaW5nLXhsOiAwO1xuICAtLWlvbi1ncmlkLXBhZGRpbmcteHM6IDA7XG59XG5pb24tY29sIHtcbiAgLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZzogOHB4O1xuICAtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLWxnOiA4cHg7XG4gIC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctbWQ6IDhweDtcbiAgLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1zbTogOHB4O1xuICAtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLXhsOiA4cHg7XG4gIC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcteHM6IDhweDtcbn1cbmlvbi1wcm9ncmVzcy1iYXIge1xuICBtYXJnaW4tdG9wOiA1cHg7XG59XG4iLCJpb24taGVhZGVyIGlvbi10b29sYmFyID4gaW9uLXRpdGxlIHtcbiAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xufVxuXG5pb24tZ3JpZCB7XG4gIC0taW9uLWdyaWQtcGFkZGluZzogMDtcbiAgLS1pb24tZ3JpZC1wYWRkaW5nLWxnOiAwO1xuICAtLWlvbi1ncmlkLXBhZGRpbmctbWQ6IDA7XG4gIC0taW9uLWdyaWQtcGFkZGluZy1zbTogMDtcbiAgLS1pb24tZ3JpZC1wYWRkaW5nLXhsOiAwO1xuICAtLWlvbi1ncmlkLXBhZGRpbmcteHM6IDA7XG59XG5cbmlvbi1jb2wge1xuICAtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nOiA4cHg7XG4gIC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmctbGc6IDhweDtcbiAgLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy1tZDogOHB4O1xuICAtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nLXNtOiA4cHg7XG4gIC0taW9uLWdyaWQtY29sdW1uLXBhZGRpbmcteGw6IDhweDtcbiAgLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZy14czogOHB4O1xufVxuXG5pb24tcHJvZ3Jlc3MtYmFyIHtcbiAgbWFyZ2luLXRvcDogNXB4O1xufSJdfQ== */\"","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Injectable, Inject } from '@angular/core';\nimport { RouterEnter } from '@services/router-enter.service';\nimport { SwitcherService, ProgramObj } from '../switcher.service';\nimport { LoadingController } from '@ionic/angular';\nimport { environment } from '@environments/environment';\nimport { PusherService } from '@shared/pusher/pusher.service';\nimport { NewRelicService } from '@shared/new-relic/new-relic.service';\nimport { NotificationService } from '@shared/notification/notification.service';\nimport { UtilsService } from '@services/utils.service';\n\n@Injectable({\n  providedIn: 'root'\n})\n\n@Component({\n  selector: 'app-switcher-program',\n  templateUrl: 'switcher-program.component.html',\n  styleUrls: ['switcher-program.component.scss']\n})\n\nexport class SwitcherProgramComponent extends RouterEnter {\n  routeUrl = '/switcher/switcher-program';\n  programs: Array<ProgramObj>;\n\n  constructor(\n    public loadingController: LoadingController,\n    public router: Router,\n    private pusherService: PusherService,\n    private switcherService: SwitcherService,\n    private newRelic: NewRelicService,\n    private notificationService: NotificationService,\n    private utils: UtilsService\n  ) { super(router); }\n\n  onEnter() {\n    this.newRelic.setPageViewName('program switcher');\n    this.switcherService.getPrograms()\n      .subscribe(programs => {\n        this.programs = programs;\n        this._getProgresses(programs);\n      });\n  }\n\n  private _getProgresses(programs) {\n    const projectIds = programs.map(v => v.project.id);\n    this.switcherService.getProgresses(projectIds).subscribe(res => {\n      res.forEach(progress => {\n        const i = this.programs.findIndex(program => program.project.id === progress.id);\n        this.programs[i].progress = progress.progress;\n        this.programs[i].todoItems = progress.todoItems;\n      });\n    });\n  }\n\n  async switch(index): Promise<void> {\n    const nrSwitchedProgramTracer = this.newRelic.createTracer('switching program');\n    const loading = await this.loadingController.create({\n      message: 'loading...'\n    });\n    this.newRelic.actionText(`selected ${this.programs[index].program.name}`);\n\n    await loading.present();\n\n    try {\n      const route = await this.switcherService.switchProgramAndNavigate(this.programs[index]);\n      loading.dismiss().then(() => {\n        nrSwitchedProgramTracer();\n        this.router.navigate(route);\n      });\n    } catch (err) {\n      await this.notificationService.alert({\n        header: 'Error switching program',\n        message: err.msg || JSON.stringify(err)\n      });\n\n      nrSwitchedProgramTracer();\n      this.newRelic.noticeError('switch program failed', JSON.stringify(err));\n    }\n    return;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { SwitcherComponent } from './switcher.component';\nimport { SwitcherProgramComponent } from './switcher-program/switcher-program.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SwitcherComponent,\n    children: [\n      {\n        path: '',\n        redirectTo: '/switcher/switcher-program'\n      },\n      {\n        path: 'switcher-program',\n        component: SwitcherProgramComponent\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [ RouterModule.forChild(routes) ],\n  exports: [ RouterModule ]\n})\nexport class SwitcherRoutingModule {}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-switcher',\n  template: '<ion-router-outlet></ion-router-outlet>'\n})\nexport class SwitcherComponent {}\n","import { SharedModule } from '@shared/shared.module';\nimport { NgModule } from '@angular/core';\n\nimport { SwitcherRoutingModule } from './switcher-routing.module';\n\nimport { SwitcherComponent } from './switcher.component';\nimport { SwitcherProgramComponent } from './switcher-program/switcher-program.component';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    SwitcherRoutingModule,\n  ],\n  declarations: [\n    SwitcherComponent,\n    SwitcherProgramComponent\n  ]\n})\nexport class SwitcherModule {}\n"],"sourceRoot":"webpack:///"}