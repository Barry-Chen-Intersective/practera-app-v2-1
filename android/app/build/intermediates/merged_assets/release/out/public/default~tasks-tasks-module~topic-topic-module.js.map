{"version":3,"sources":["./src/app/topic/topic.component.html","./src/app/topic/topic-routing.module.ts","./src/app/topic/topic.component.scss","./src/app/topic/topic.component.ts","./src/app/topic/topic.module.ts","./src/app/topic/topic.service.ts"],"names":[],"mappings":"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","file":"default~tasks-tasks-module~topic-topic-module.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar [ngClass]=\\\"{'ion-toolbar-absolute': !utils.isMobile()}\\\">\\n    <ion-buttons slot=\\\"start\\\" *ngIf=\\\"utils.isMobile()\\\">\\n      <ion-button (click)=\\\"back()\\\" id=\\\"btn-back\\\">\\n        <ion-icon class=\\\"icon-backward ion-margin-start\\\" name=\\\"arrow-back\\\" (click)=\\\"back()\\\" color=\\\"primary\\\" slot=\\\"icon-only\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n\\n    <ion-title class=\\\"ion-text-center\\\" [ngClass]=\\\"{\\n      'subtitle-2': !utils.isMobile()\\n    }\\\">Topic</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content class=\\\"ion-padding\\\" color=\\\"light\\\" [ngClass]=\\\"{'ion-content-absolute-with-footer': !utils.isMobile()}\\\">\\n  <div class=\\\"ion-text-center ion-margin-top\\\" *ngIf=\\\"loadingTopic\\\">\\n    <ion-spinner></ion-spinner>\\n  </div>\\n  <h3 class=\\\"headline-4 ion-text-center\\\">{{topic.title}}</h3>\\n  <div *ngIf=\\\"topic.videolink && topic.videolink !=='magiclink'\\\" class=\\\"text-center\\\">\\n    <label class=\\\"subtitle-2 gray-2\\\">Video</label>\\n    <div [innerHtml]=\\\"iframeHtml\\\" class=\\\"video-container ion-text-center\\\" [ngClass]=\\\"{'desktop-view': !utils.isMobile()}\\\"></div>\\n  </div>\\n\\n  <ng-container *ngIf=\\\"topic.content\\\">\\n    <ion-card class=\\\"background-white practera-card\\\">\\n      <ion-card-content class=\\\"body-1 black\\\" [innerHtml]=\\\"topic.content\\\"></ion-card-content>\\n    </ion-card>\\n  </ng-container>\\n\\n  <div *ngIf=\\\"topic.files && topic.files.length > 0\\\"  color=\\\"light\\\" >\\n    <label class=\\\"subtitle-2 gray-2\\\">Supporting Downloads</label>\\n\\n    <div *ngFor=\\\"let file of topic.files\\\" class=\\\"supporting-files\\\">\\n      <ion-card class=\\\"background-white practera-card\\\">\\n        <ion-grid >\\n          <ion-row>\\n            <ion-col size=\\\"10\\\" class=\\\"file-name-view\\\">\\n              <p class=\\\"vertical-middle black\\\"><ion-icon name=\\\"document\\\" class=\\\"vertical-middle\\\" color=\\\"primary\\\"></ion-icon>&nbsp;{{file.name}} </p>\\n            </ion-col>\\n            <ion-col size=\\\"2\\\">\\n              <ion-icon class=\\\"vertical-middle hover-pointer\\\" *ngIf=\\\"file.url.length > 0\\\" name=\\\"search\\\" (click)=\\\"previewFile(file)\\\" color=\\\"primary\\\"></ion-icon>\\n              <a *ngIf=\\\"file.url.length > 0\\\" [href]=\\\"file.url\\\" download class=\\\"text-right\\\" target=\\\"_blank\\\">\\n                <ion-icon name=\\\"download-outline\\\" class=\\\"float-right\\\"></ion-icon>\\n              </a>\\n            </ion-col>\\n          </ion-row>\\n        </ion-grid>\\n      </ion-card>\\n    </div>\\n  </div>\\n</ion-content>\\n\\n<ion-footer color=\\\"light\\\" [ngClass]=\\\"{'ion-footer-absolute': !utils.isMobile()}\\\">\\n  <ion-toolbar class=\\\"ion-text-center\\\" style=\\\"height: 100%\\\">\\n    <ion-spinner *ngIf=\\\"loadingMarkedDone || loadingTopic\\\"\\n      style=\\\"width: 100%;\\\"\\n      name=\\\"dots\\\"\\n      class=\\\"vertical-middle text-center\\\"\\n    ></ion-spinner>\\n\\n    <img *ngIf=\\\"redirecting\\\" class=\\\"footer-action\\\" src=\\\"/assets/loading.gif\\\">\\n\\n    <ion-button *ngIf=\\\"!loadingMarkedDone && !loadingTopic && !redirecting\\\"\\n      (click)=\\\"continue()\\\"\\n      shape=\\\"round\\\"\\n      fill=\\\"clear\\\">\\n      <ion-icon *ngIf=\\\"btnToggleTopicIsDone\\\" color=\\\"primary\\\" slot=\\\"start\\\" name=\\\"checkmark\\\"></ion-icon>\\n      <ion-text>CONTINUE</ion-text>\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\\n\"","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { TopicComponent } from './topic.component';\n\nconst TopicRoutes: Routes = [\n  { path: ':activityId/:id',  component: TopicComponent }\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forChild(TopicRoutes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class TopicRoutingModule { }\n","export default \".toggle-mark {\\n  font-size: small;\\n}\\n\\n.file-name-view p {\\n  margin: 0;\\n  font-size: 14px;\\n}\\n\\n.icon-backward {\\n  font-size: 20px !important;\\n}\\n\\n.margin-right {\\n  margin-right: 10px;\\n}\\n\\n.supporting-files {\\n  font-size: 14px;\\n  line-height: 20px;\\n}\\n\\n.supporting-files ion-icon {\\n  font-size: 20px;\\n}\\n\\n.practera-card {\\n  margin: 18px 0;\\n}\\n\\n.video-container {\\n  position: relative;\\n  padding-bottom: 56.25%;\\n}\\n\\n.video-container.desktop-view {\\n  padding-bottom: 40%;\\n}\\n\\n.hover-pointer {\\n  cursor: pointer;\\n}\\n\\n.footer-action {\\n  height: 40px;\\n  margin: 10px 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaGF3L1dvcmtzcGFjZXMvd3d3L2ludGVyc2VjdGl2ZS9wcmFjdGVyYS1hcHAtdjIvc3JjL2FwcC90b3BpYy90b3BpYy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvdG9waWMvdG9waWMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBQTtBQ0NGOztBREVFO0VBQ0UsU0FBQTtFQUNBLGVBQUE7QUNDSjs7QURFQTtFQUNFLDBCQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtBQ0NGOztBRENBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FDRUY7O0FEREU7RUFDRSxlQUFBO0FDR0o7O0FEQUE7RUFDRSxjQUFBO0FDR0Y7O0FEQUE7RUFDRSxrQkFBQTtFQUNBLHNCQUFBO0FDR0Y7O0FERkU7RUFDRSxtQkFBQTtBQ0lKOztBRERBO0VBQ0UsZUFBQTtBQ0lGOztBREZBO0VBQ0UsWUFBQTtFQUNBLGlCQUFBO0FDS0YiLCJmaWxlIjoic3JjL2FwcC90b3BpYy90b3BpYy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50b2dnbGUtbWFyayB7XG4gIGZvbnQtc2l6ZTogc21hbGw7XG59XG4uZmlsZS1uYW1lLXZpZXcge1xuICBwIHtcbiAgICBtYXJnaW46IDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICB9XG59XG4uaWNvbi1iYWNrd2FyZCB7XG4gIGZvbnQtc2l6ZTogMjBweCAhaW1wb3J0YW50O1xufVxuXG4ubWFyZ2luLXJpZ2h0IHtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuLnN1cHBvcnRpbmctZmlsZXMge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBpb24taWNvbiB7XG4gICAgZm9udC1zaXplOiAyMHB4O1xuICB9XG59XG4ucHJhY3RlcmEtY2FyZCB7XG4gIG1hcmdpbjogMThweCAwO1xufVxuXG4udmlkZW8tY29udGFpbmVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBwYWRkaW5nLWJvdHRvbTogNTYuMjUlO1xuICAmLmRlc2t0b3AtdmlldyB7XG4gICAgcGFkZGluZy1ib3R0b206IDQwJTtcbiAgfVxufVxuLmhvdmVyLXBvaW50ZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG4uZm9vdGVyLWFjdGlvbiB7XG4gIGhlaWdodDogNDBweDtcbiAgbWFyZ2luOiAxMHB4IDIwcHg7XG59XG4iLCIudG9nZ2xlLW1hcmsge1xuICBmb250LXNpemU6IHNtYWxsO1xufVxuXG4uZmlsZS1uYW1lLXZpZXcgcCB7XG4gIG1hcmdpbjogMDtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuXG4uaWNvbi1iYWNrd2FyZCB7XG4gIGZvbnQtc2l6ZTogMjBweCAhaW1wb3J0YW50O1xufVxuXG4ubWFyZ2luLXJpZ2h0IHtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuXG4uc3VwcG9ydGluZy1maWxlcyB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XG59XG4uc3VwcG9ydGluZy1maWxlcyBpb24taWNvbiB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbn1cblxuLnByYWN0ZXJhLWNhcmQge1xuICBtYXJnaW46IDE4cHggMDtcbn1cblxuLnZpZGVvLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgcGFkZGluZy1ib3R0b206IDU2LjI1JTtcbn1cbi52aWRlby1jb250YWluZXIuZGVza3RvcC12aWV3IHtcbiAgcGFkZGluZy1ib3R0b206IDQwJTtcbn1cblxuLmhvdmVyLXBvaW50ZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5mb290ZXItYWN0aW9uIHtcbiAgaGVpZ2h0OiA0MHB4O1xuICBtYXJnaW46IDEwcHggMjBweDtcbn0iXX0= */\"","import { TopicService, Topic } from './topic.service';\nimport { Component, OnInit, NgZone, Input, Output, EventEmitter } from '@angular/core';\nimport { EmbedVideoService } from 'ngx-embed-video';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FilestackService } from '@shared/filestack/filestack.service';\nimport { RouterEnter } from '@services/router-enter.service';\nimport { UtilsService } from '@services/utils.service';\nimport { BrowserStorageService } from '@services/storage.service';\nimport { NotificationService } from '@shared/notification/notification.service';\nimport { ActivityService, Task } from '../activity/activity.service';\nimport { SharedService } from '@services/shared.service';\nimport { Subscription, Observable } from 'rxjs';\nimport { NewRelicService } from '@shared/new-relic/new-relic.service';\n\n@Component({\n  selector: 'app-topic',\n  templateUrl: './topic.component.html',\n  styleUrls: ['./topic.component.scss']\n})\nexport class TopicComponent extends RouterEnter {\n  @Input() inputActivityId: number;\n  @Input() inputId: number;\n  @Output() navigate = new EventEmitter();\n  @Output() changeStatus = new EventEmitter();\n  routeUrl = '/topic/';\n  topic: Topic = {\n    id: 0,\n    title: '',\n    content: '',\n    videolink: '',\n    files: [],\n    hasComments: false\n  };\n  iframeHtml = '';\n  btnToggleTopicIsDone = false;\n  loadingMarkedDone = true;\n  loadingTopic = true;\n  id = 0;\n  activityId = 0;\n  topicProgress: number;\n  isLoadingPreview = false;\n  askForMarkAsDone: boolean;\n  redirecting = false;\n\n  constructor(\n    private topicService: TopicService,\n    private embedService: EmbedVideoService,\n    public router: Router,\n    private route: ActivatedRoute,\n    private filestackService: FilestackService,\n    public storage: BrowserStorageService,\n    public utils: UtilsService,\n    public notificationService: NotificationService,\n    private activityService: ActivityService,\n    private sharedService: SharedService,\n    private ngZone: NgZone,\n    private newRelic: NewRelicService\n  ) {\n    super(router);\n  }\n\n  private _initialise() {\n    this.topic = {\n      id: 0,\n      title: '',\n      content: '',\n      videolink: '',\n      files: [],\n      hasComments: false\n    };\n    this.loadingMarkedDone = true;\n    this.loadingTopic = true;\n    this.redirecting = false;\n    this.isLoadingPreview = false;\n    this.btnToggleTopicIsDone = false;\n    this.askForMarkAsDone = false;\n  }\n\n  onEnter() {\n    this._initialise();\n    if (this.inputId) {\n      this.id = +this.inputId;\n    } else {\n      this.id = +this.route.snapshot.paramMap.get('id');\n    }\n    if (this.inputActivityId) {\n      this.activityId = +this.inputActivityId;\n    } else {\n      this.activityId = +this.route.snapshot.paramMap.get('activityId');\n    }\n    this._getTopic();\n    this._getTopicProgress();\n    setTimeout(() => this.askForMarkAsDone = true, 15000);\n  }\n\n  ionViewWillLeave() {\n    this.sharedService.stopPlayingVideos();\n  }\n\n  private _getTopic() {\n    this.topicService.getTopic(this.id)\n      .subscribe(\n        topic => {\n          this.topic = topic;\n          this.loadingTopic = false;\n          if ( topic.videolink ) {\n            this.iframeHtml = this.embedService.embed(this.topic.videolink, { attr: { class: !this.utils.isMobile() ? 'topic-video desktop-view' : 'topic-video' }});\n          }\n          this.newRelic.setPageViewName(`Topic ${this.topic.title} ID: ${this.topic.id}`);\n        },\n        err => {\n          this.newRelic.noticeError(`${JSON.stringify(err)}`);\n        }\n      );\n  }\n\n  private _getTopicProgress() {\n    this.topicService.getTopicProgress(this.activityId, this.id)\n      .subscribe(\n        result => {\n          this.topicProgress = result;\n          if (this.topicProgress !== null && this.topicProgress !== undefined) {\n            if (this.topicProgress === 1) {\n              this.btnToggleTopicIsDone = true;\n            }\n          }\n          this.loadingMarkedDone = false;\n        },\n        err => {\n          this.newRelic.noticeError(`${JSON.stringify(err)}`);\n        }\n      );\n  }\n\n  /**\n   * @name markAsDone\n   * @description set a topic as read by providing current id\n   * @param {Function} callback optional callback function for further action after subcription is completed\n   */\n  markAsDone(callback?): Observable<any> {\n    return this.topicService.updateTopicProgress(this.id).pipe(response => {\n      // toggle event change should happen after subscription is completed\n      this.btnToggleTopicIsDone = true;\n      this.changeStatus.emit(this.id);\n      return response;\n    });\n  }\n\n  /**\n   * continue (mark as read) button\n   * @description button action to trigger `gotoNextTask()`\n   */\n  async continue() {\n    // if we are going to mark topic as done\n    const markAsDone = !this.btnToggleTopicIsDone;\n    // if topic has been marked as read\n    if (!this.btnToggleTopicIsDone) {\n      this.loadingMarkedDone = true;\n      // mark topic as done\n      try {\n        await this.markAsDone().toPromise();\n      } catch (err) {\n        await this.notificationService.alert({\n          header: 'Error marking topic as completed.',\n          message: err.msg || JSON.stringify(err)\n        });\n        this.newRelic.noticeError(`${JSON.stringify(err)}`);\n      }\n      this.loadingMarkedDone = false;\n    }\n\n    this.redirecting = true;\n    this.activityService.gotoNextTask(this.activityId, 'topic', this.topic.id, markAsDone).then(redirect => {\n      this.redirecting = false;\n      if (redirect) {\n        this._navigate(redirect);\n      }\n    });\n  }\n\n  /**\n   * @name previewFile\n   * @description open and preview file in a modal\n   * @param {object} file filestack object\n   */\n  async previewFile(file) {\n    if (this.isLoadingPreview === false) {\n      this.isLoadingPreview = true;\n\n      try {\n        const filestack = await this.filestackService.previewFile(file);\n        this.isLoadingPreview = false;\n        return filestack;\n      } catch (err) {\n        const toasted = await this.notificationService.alert({\n          header: 'Error Previewing file',\n          message: err.msg || JSON.stringify(err)\n        });\n        this.loadingTopic = false;\n        this.newRelic.noticeError(`${JSON.stringify(err)}`);\n      }\n    }\n  }\n\n  // force every navigation happen under radar of angular\n  private _navigate(direction): Promise<boolean> {\n    if (!direction) {\n      return;\n    }\n    if (this.utils.isMobile()) {\n      // redirect to topic/assessment page for mobile\n      return this.ngZone.run(() => {\n        return this.router.navigate(direction);\n      });\n    } else {\n      // emit event to parent component(task component)\n      switch (direction[0]) {\n        case 'topic':\n          this.navigate.emit({\n            type: 'topic',\n            topicId: direction[2]\n          });\n          break;\n        case 'assessment':\n          this.navigate.emit({\n            type: 'assessment',\n            contextId: direction[3],\n            assessmentId: direction[4]\n          });\n          break;\n        default:\n          return this.ngZone.run(() => {\n            return this.router.navigate(direction);\n          });\n      }\n    }\n  }\n\n  back() {\n    if (this.btnToggleTopicIsDone || !this.askForMarkAsDone) {\n      return this._navigate([\n        'app',\n        'activity',\n        this.activityId\n      ]);\n    }\n\n    const type = 'Topic';\n    return this.notificationService.alert({\n      header: `Complete ${type}?`,\n      message: 'Would you like to mark this task as done?',\n      buttons: [\n        {\n          text: 'No',\n          handler: () => {\n            return this._navigate(['app', 'activity', this.activityId]);\n          },\n        },\n        {\n          text: 'Yes',\n          handler: () => {\n            this.newRelic.addPageAction('Mark as read before back');\n            return this.markAsDone().subscribe(\n              () => {\n                return this.notificationService.presentToast('You\\'ve completed the topic!').then(() => this._navigate([\n                  'app',\n                  'activity',\n                  this.activityId,\n                ]));\n              },\n              err => {\n                this.newRelic.noticeError(`${JSON.stringify(err)}`);\n              });\n          }\n        }\n      ]\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { TopicComponent} from './topic.component';\nimport { TopicService } from './topic.service';\nimport { TopicRoutingModule } from './topic-routing.module';\nimport { FilestackModule } from '@shared/filestack/filestack.module';\nimport { SharedModule } from '@shared/shared.module';\nimport { ActivityModule } from '../activity/activity.module';\n\n@NgModule({\n  imports: [\n    SharedModule,\n    TopicRoutingModule,\n    FilestackModule,\n    ActivityModule\n  ],\n  declarations: [\n    TopicComponent,\n  ],\n  providers: [\n    TopicService\n  ],\n  exports: [\n    SharedModule,\n    FilestackModule,\n    ActivityModule,\n    TopicComponent,\n  ]\n})\nexport class TopicModule {}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { RequestService } from '@shared/request/request.service';\nimport { UtilsService } from '@services/utils.service';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nexport interface Topic {\n  id: number;\n  title: string;\n  content: any;\n  videolink?: string;\n  files: Array<object>;\n  hasComments: boolean;\n}\n\nconst api = {\n  get: {\n    stories: 'api/stories.json',\n    progress: 'api/v2/motivations/progress/list.json'\n  },\n  post: {\n    updateProgress: 'api/v2/motivations/progress/create.json',\n  }\n};\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class TopicService {\n\n  constructor(\n    private request: RequestService,\n    private utils: UtilsService,\n    public sanitizer: DomSanitizer,\n  ) { }\n\n  getTopic(id: number): Observable<any> {\n    return this.request.get(api.get.stories, {params: { model_id: id }})\n      .pipe(map(response => {\n        if (response.success && response.data) {\n          return this._normaliseTopic(response.data);\n        }\n      })\n    );\n  }\n\n  private _normaliseTopic(data: any) {\n    // In API response, 'data' is an array of topics\n    // (since we passed topic id, it will return only one topic, but still in array format).\n    // That's why we use data[0]\n    if (!Array.isArray(data) || !this.utils.has(data[0], 'Story') || !this.utils.has(data[0], 'Filestore')) {\n      return this.request.apiResponseFormatError('Story format error');\n    }\n\n    const topic: Topic = {\n      id: 0,\n      title: '',\n      content: '',\n      videolink: '',\n      hasComments: false,\n      files: []\n    };\n    const thisTopic = data[0];\n    if (!this.utils.has(thisTopic.Story, 'id') ||\n      !this.utils.has(thisTopic.Story, 'title')) {\n      return this.request.apiResponseFormatError('Story.Story format error');\n    }\n    topic.id = thisTopic.Story.id;\n    topic.title = thisTopic.Story.title;\n    // if API return empty string (\"\") to content, utils.has (lodash) take it as a value and this if statement works and set json to content\n    // to privent that we checking topic content is not equels to empty string.\n    if (this.utils.has(thisTopic.Story, 'content') && !this.utils.isEmpty(thisTopic.Story.content)) {\n      thisTopic.Story.content = thisTopic.Story.content.replace(/text-align: center;/gi, 'text-align: center; text-align: -webkit-center;');\n      topic.content = this.sanitizer.bypassSecurityTrustHtml(thisTopic.Story.content);\n    }\n    if (this.utils.has(thisTopic.Story, 'videolink')) {\n      topic.videolink = thisTopic.Story.videolink;\n    }\n    topic.hasComments = thisTopic.Story.has_comments;\n    topic.files = thisTopic.Filestore.map(item => ({url: item.slug , name: item.name}));\n\n    return topic;\n  }\n\n  updateTopicProgress(id) {\n    const postData = {\n      model: 'topic',\n      model_id: id,\n      state: 'completed'\n    };\n    return this.request.post(api.post.updateProgress, postData);\n  }\n\n  getTopicProgress(activityId, topicId): Observable<any> {\n    return this.request.get(api.get.progress, {params: {\n      model: 'Activity',\n      model_id: activityId,\n      scope: 'Task'\n    }})\n    .pipe(map(response => {\n      if (response.success && !this.utils.isEmpty(response.data)) {\n        const progress = response.data.Activity.Topic.find(function (topic) {\n            return topic.id === topicId;\n        });\n        return progress.progress;\n      } else {\n        return false;\n      }\n    }));\n  }\n\n}\n"],"sourceRoot":"webpack:///"}